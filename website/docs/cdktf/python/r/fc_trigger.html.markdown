---
subcategory: "Function Compute Service (FC)"
layout: "alicloud"
page_title: "Alicloud: alicloud_fc_trigger"
sidebar_current: "docs-alicloud-resource-fc"
description: |-
  Provides a Alicloud Function Compute Trigger resource.
---


<!-- Please do not edit this file, it is generated. -->
# alicloud\_fc\_trigger

Provides an Alicloud Function Compute Trigger resource. Based on trigger, execute your code in response to events in Alibaba Cloud.
 For information about Service and how to use it, see [What is Function Compute](https://www.alibabacloud.com/help/doc-detail/52895.htm).

-> **NOTE:** The resource requires a provider field 'account_id'. [See account_id](https://www.terraform.io/docs/providers/alicloud/index.html#account_id).

## Example Usage

Basic Usage

```terraform
variable "region" {
  default = "cn-hangzhou"
}

variable "account" {
  default = "12345"
}

provider "alicloud" {
  account_id = var.account
  region     = var.region
}

resource "alicloud_fc_trigger" "foo" {
  service    = "my-fc-service"
  function   = "hello-world"
  name       = "hello-trigger"
  role       = alicloud_ram_role.foo.arn
  source_arn = "acs:log:${var.region}:${var.account}:project/${alicloud_log_project.foo.name}"
  type       = "log"
  config     = <<EOF
    {
        "sourceConfig": {
            "project": "project-for-fc",
            "logstore": "project-for-fc"
        },
        "jobConfig": {
            "maxRetryTime": 3,
            "triggerInterval": 60
        },
        "functionParameter": {
            "a": "b",
            "c": "d"
        },
        "logConfig": {
            "project": "project-for-fc-log",
            "logstore": "project-for-fc-log"
        },
        "enable": true
    }
  
EOF


  depends_on = [alicloud_ram_role_policy_attachment.foo]
}

resource "alicloud_ram_role" "foo" {
  name     = "${var.name}-trigger"
  document = <<EOF
  {
    "Statement": [
      {
        "Action": "sts:AssumeRole",
        "Effect": "Allow",
        "Principal": {
          "Service": [
            "log.aliyuncs.com"
          ]
        }
      }
    ],
    "Version": "1"
  }
  
EOF


  description = "this is a test"
  force       = true
}

resource "alicloud_ram_role_policy_attachment" "foo" {
  role_name   = alicloud_ram_role.foo.name
  policy_name = "AliyunLogFullAccess"
  policy_type = "System"
}
```

MNS topic trigger:

```python
import constructs as constructs
import cdktf as cdktf
# Provider bindings are generated by running cdktf get.
# See https://cdk.tf/provider-generation for more details.
import ...gen.providers.alicloud as alicloud
class MyConvertedCode(cdktf.TerraformStack):
    def __init__(self, scope, name):
        super().__init__(scope, name)
        # Terraform Variables are not always the best fit for getting inputs in the context of Terraform CDK.
        #     You can read more about this at https://cdk.tf/variables
        name = cdktf.TerraformVariable(self, "name",
            default="fctriggermnstopic"
        )
        alicloud_fc_service_foo = alicloud.fc_service.FcService(self, "foo",
            internet_access=False,
            name=name.string_value
        )
        alicloud_log_project_foo = alicloud.log_project.LogProject(self, "foo_2",
            description="tf unit test",
            name=name.string_value
        )
        # This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.
        alicloud_log_project_foo.override_logical_id("foo")
        alicloud.log_store.LogStore(self, "bar",
            name="${" + name.value + "}-source",
            project=cdktf.Token.as_string(alicloud_log_project_foo.name),
            retention_period=cdktf.Token.as_number("3000"),
            shard_count=1
        )
        alicloud_log_store_foo = alicloud.log_store.LogStore(self, "foo_4",
            name=name.string_value,
            project=cdktf.Token.as_string(alicloud_log_project_foo.name),
            retention_period=cdktf.Token.as_number("3000"),
            shard_count=1
        )
        # This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.
        alicloud_log_store_foo.override_logical_id("foo")
        alicloud_mns_topic_foo = alicloud.mns_topic.MnsTopic(self, "foo_5",
            name=name.string_value
        )
        # This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.
        alicloud_mns_topic_foo.override_logical_id("foo")
        alicloud_oss_bucket_foo = alicloud.oss_bucket.OssBucket(self, "foo_6",
            bucket=name.string_value
        )
        # This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.
        alicloud_oss_bucket_foo.override_logical_id("foo")
        alicloud_oss_bucket_object_foo =
        alicloud.oss_bucket_object.OssBucketObject(self, "foo_7",
            bucket=cdktf.Token.as_string(alicloud_oss_bucket_foo.id),
            key="fc/hello.zip",
            source="./hello.zip"
        )
        # This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.
        alicloud_oss_bucket_object_foo.override_logical_id("foo")
        alicloud_ram_role_foo = alicloud.ram_role.RamRole(self, "foo_8",
            description="this is a test",
            document="  {\n    \"Statement\": [\n      {\n        \"Action\": \"sts:AssumeRole\",\n        \"Effect\": \"Allow\",\n        \"Principal\": {\n          \"Service\": [\n            \"mns.aliyuncs.com\"\n          ]\n        }\n      }\n    ],\n    \"Version\": \"1\"\n  }\n",
            force=True,
            name="${" + name.value + "}-trigger"
        )
        # This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.
        alicloud_ram_role_foo.override_logical_id("foo")
        alicloud_ram_role_policy_attachment_foo =
        alicloud.ram_role_policy_attachment.RamRolePolicyAttachment(self, "foo_9",
            policy_name="AliyunMNSNotificationRolePolicy",
            policy_type="System",
            role_name=cdktf.Token.as_string(alicloud_ram_role_foo.name)
        )
        # This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.
        alicloud_ram_role_policy_attachment_foo.override_logical_id("foo")
        data_alicloud_account_current =
        alicloud.data_alicloud_account.DataAlicloudAccount(self, "current")
        data_alicloud_regions_current_region =
        alicloud.data_alicloud_regions.DataAlicloudRegions(self, "current_region",
            current=True
        )
        alicloud_fc_function_foo = alicloud.fc_function.FcFunction(self, "foo_12",
            handler="hello.handler",
            memory_size=512,
            name=name.string_value,
            oss_bucket=cdktf.Token.as_string(alicloud_oss_bucket_foo.id),
            oss_key=cdktf.Token.as_string(alicloud_oss_bucket_object_foo.key),
            runtime="python2.7",
            service=cdktf.Token.as_string(alicloud_fc_service_foo.name)
        )
        # This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.
        alicloud_fc_function_foo.override_logical_id("foo")
        alicloud_fc_trigger_foo = alicloud.fc_trigger.FcTrigger(self, "foo_13",
            config_mns="  {\n    \"filterTag\":\"testTag\",\n    \"notifyContentFormat\":\"STREAM\",\n    \"notifyStrategy\":\"BACKOFF_RETRY\"\n  }\n",
            depends_on=["alicloud_ram_role_policy_attachment.foo"],
            function=cdktf.Token.as_string(alicloud_fc_function_foo.name),
            name=name.string_value,
            role=cdktf.Token.as_string(alicloud_ram_role_foo.arn),
            service=cdktf.Token.as_string(alicloud_fc_service_foo.name),
            source_arn="acs:mns:" +
            cdktf.Token.as_string(
                cdktf.property_access(data_alicloud_regions_current_region.regions, ["0", "id"
                ])) + ":${" + data_alicloud_account_current.id + "}:/topics/${" + alicloud_mns_topic_foo.name + "}",
            type="mns_topic"
        )
        # This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.
        alicloud_fc_trigger_foo.override_logical_id("foo")
```

CDN events trigger:

```python
import constructs as constructs
import cdktf as cdktf
# Provider bindings are generated by running cdktf get.
# See https://cdk.tf/provider-generation for more details.
import ...gen.providers.alicloud as alicloud
class MyConvertedCode(cdktf.TerraformStack):
    def __init__(self, scope, name):
        super().__init__(scope, name)
        # Terraform Variables are not always the best fit for getting inputs in the context of Terraform CDK.
        #     You can read more about this at https://cdk.tf/variables
        name = cdktf.TerraformVariable(self, "name",
            default="fctriggercdneventsconfig"
        )
        alicloud_cdn_domain_new_domain = alicloud.cdn_domain_new.CdnDomainNew(self, "domain",
            cdn_type="web",
            domain_name="${" + name.value + "}.tf.com",
            scope="overseas",
            sources=[CdnDomainNewSources(
                content="1.1.1.1",
                port=80,
                priority=20,
                type="ipaddr",
                weight=10
            )
            ]
        )
        alicloud_fc_service_foo = alicloud.fc_service.FcService(self, "foo",
            internet_access=False,
            name=name.string_value
        )
        alicloud_oss_bucket_foo = alicloud.oss_bucket.OssBucket(self, "foo_3",
            bucket=name.string_value
        )
        # This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.
        alicloud_oss_bucket_foo.override_logical_id("foo")
        alicloud_oss_bucket_object_foo =
        alicloud.oss_bucket_object.OssBucketObject(self, "foo_4",
            bucket=cdktf.Token.as_string(alicloud_oss_bucket_foo.id),
            key="fc/hello.zip",
            source="./hello.zip"
        )
        # This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.
        alicloud_oss_bucket_object_foo.override_logical_id("foo")
        alicloud_ram_policy_foo = alicloud.ram_policy.RamPolicy(self, "foo_5",
            description="this is a test",
            document="    {\n        \"Version\": \"1\",\n        \"Statement\": [\n        {\n            \"Action\": [\n            \"fc:InvokeFunction\"\n            ],\n        \"Resource\": [\n            \"acs:fc:*:*:services/tf_cdnEvents/functions/*\",\n            \"acs:fc:*:*:services/tf_cdnEvents.*/functions/*\"\n        ],\n        \"Effect\": \"Allow\"\n        }\n        ]\n    }\n",
            force=True,
            name="${" + name.value + "}-trigger"
        )
        # This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.
        alicloud_ram_policy_foo.override_logical_id("foo")
        alicloud_ram_role_foo = alicloud.ram_role.RamRole(self, "foo_6",
            description="this is a test",
            document="    {\n        \"Version\": \"1\",\n        \"Statement\": [\n            {\n                \"Action\": \"cdn:Describe*\",\n                \"Resource\": \"*\",\n                \"Effect\": \"Allow\",\n\t\t        \"Principal\": {\n                \"Service\":\n                    [\"log.aliyuncs.com\"]\n                }\n            }\n        ]\n    }\n",
            force=True,
            name="${" + name.value + "}-trigger"
        )
        # This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.
        alicloud_ram_role_foo.override_logical_id("foo")
        alicloud_ram_role_policy_attachment_foo =
        alicloud.ram_role_policy_attachment.RamRolePolicyAttachment(self, "foo_7",
            policy_name=cdktf.Token.as_string(alicloud_ram_policy_foo.name),
            policy_type="Custom",
            role_name=cdktf.Token.as_string(alicloud_ram_role_foo.name)
        )
        # This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.
        alicloud_ram_role_policy_attachment_foo.override_logical_id("foo")
        data_alicloud_account_current =
        alicloud.data_alicloud_account.DataAlicloudAccount(self, "current")
        alicloud_fc_function_foo = alicloud.fc_function.FcFunction(self, "foo_9",
            handler="hello.handler",
            memory_size=512,
            name=name.string_value,
            oss_bucket=cdktf.Token.as_string(alicloud_oss_bucket_foo.id),
            oss_key=cdktf.Token.as_string(alicloud_oss_bucket_object_foo.key),
            runtime="python2.7",
            service=cdktf.Token.as_string(alicloud_fc_service_foo.name)
        )
        # This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.
        alicloud_fc_function_foo.override_logical_id("foo")
        alicloud.fc_trigger.FcTrigger(self, "default",
            config="      {\"eventName\":\"LogFileCreated\",\n     \"eventVersion\":\"1.0.0\",\n     \"notes\":\"cdn events trigger\",\n     \"filter\":{\n        \"domain\": [\"${" + alicloud_cdn_domain_new_domain.domain_name + "}\"]\n        }\n    }\n",
            depends_on=["alicloud_ram_role_policy_attachment.foo"],
            function=cdktf.Token.as_string(alicloud_fc_function_foo.name),
            name=name.string_value,
            role=cdktf.Token.as_string(alicloud_ram_role_foo.arn),
            service=cdktf.Token.as_string(alicloud_fc_service_foo.name),
            source_arn="acs:cdn:*:${" + data_alicloud_account_current.id + "}",
            type="cdn_events"
        )
```

EventBridge trigger:

```python
import constructs as constructs
import cdktf as cdktf
# Provider bindings are generated by running cdktf get.
# See https://cdk.tf/provider-generation for more details.
import ...gen.providers.alicloud as alicloud
class MyConvertedCode(cdktf.TerraformStack):
    def __init__(self, scope, name):
        super().__init__(scope, name)
        # Terraform Variables are not always the best fit for getting inputs in the context of Terraform CDK.
        #     You can read more about this at https://cdk.tf/variables
        name = cdktf.TerraformVariable(self, "name",
            default="fctriggereventbridgeconfig"
        )
        alicloud.event_bridge_service_linked_role.EventBridgeServiceLinkedRole(self, "service_linked_role",
            product_name="AliyunServiceRoleForEventBridgeSendToFC"
        )
        alicloud_fc_service_foo = alicloud.fc_service.FcService(self, "foo",
            internet_access=False,
            name=name.string_value
        )
        alicloud_oss_bucket_foo = alicloud.oss_bucket.OssBucket(self, "foo_3",
            bucket=name.string_value
        )
        # This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.
        alicloud_oss_bucket_foo.override_logical_id("foo")
        alicloud_oss_bucket_object_foo =
        alicloud.oss_bucket_object.OssBucketObject(self, "foo_4",
            bucket=cdktf.Token.as_string(alicloud_oss_bucket_foo.id),
            key="fc/hello.zip",
            source="./hello.zip"
        )
        # This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.
        alicloud_oss_bucket_object_foo.override_logical_id("foo")
        alicloud.data_alicloud_account.DataAlicloudAccount(self, "current")
        alicloud_fc_function_foo = alicloud.fc_function.FcFunction(self, "foo_6",
            handler="hello.handler",
            memory_size=512,
            name=name.string_value,
            oss_bucket=cdktf.Token.as_string(alicloud_oss_bucket_foo.id),
            oss_key=cdktf.Token.as_string(alicloud_oss_bucket_object_foo.key),
            runtime="python2.7",
            service=cdktf.Token.as_string(alicloud_fc_service_foo.name)
        )
        # This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.
        alicloud_fc_function_foo.override_logical_id("foo")
        alicloud.fc_trigger.FcTrigger(self, "default",
            config="    {\n        \"triggerEnable\": false,\n        \"asyncInvocationType\": false,\n        \"eventRuleFilterPattern\": \"{\\\"source\\\":[\\\"acs.oss\\\"],\\\"type\\\":[\\\"oss:BucketCreated:PutBucket\\\"]}\",\n        \"eventSourceConfig\": {\n            \"eventSourceType\": \"Default\"\n        }\n    }\n",
            function=cdktf.Token.as_string(alicloud_fc_function_foo.name),
            name=name.string_value,
            service=cdktf.Token.as_string(alicloud_fc_service_foo.name),
            type="eventbridge"
        )
        alicloud.fc_trigger.FcTrigger(self, "mns",
            config="    {\n        \"triggerEnable\": false,\n        \"asyncInvocationType\": false,\n        \"eventRuleFilterPattern\": \"{}\",\n        \"eventSourceConfig\": {\n            \"eventSourceType\": \"MNS\",\n            \"eventSourceParameters\": {\n                \"sourceMNSParameters\": {\n                    \"RegionId\": \"cn-hangzhou\",\n                    \"QueueName\": \"mns-queue\",\n                    \"IsBase64Decode\": true\n                }\n            }\n        }\n    }\n",
            function=cdktf.Token.as_string(alicloud_fc_function_foo.name),
            name=name.string_value,
            service=cdktf.Token.as_string(alicloud_fc_service_foo.name),
            type="eventbridge"
        )
        alicloud.fc_trigger.FcTrigger(self, "rabbitmq",
            config="    {\n        \"triggerEnable\": false,\n        \"asyncInvocationType\": false,\n        \"eventRuleFilterPattern\": \"{}\",\n        \"eventSourceConfig\": {\n            \"eventSourceType\": \"RabbitMQ\",\n            \"eventSourceParameters\": {\n                \"sourceRabbitMQParameters\": {\n                    \"RegionId\": \"cn-hangzhou\",\n                    \"InstanceId\": \"amqp-cn-****** \",\n                    \"VirtualHostName\": \"test-virtual\",\n                    \"QueueName\": \"test-queue\"\n                }\n            }\n        }\n    }\n",
            function=cdktf.Token.as_string(alicloud_fc_function_foo.name),
            name=name.string_value,
            service=cdktf.Token.as_string(alicloud_fc_service_foo.name),
            type="eventbridge"
        )
        alicloud.fc_trigger.FcTrigger(self, "rocketmq",
            config="    {\n        \"triggerEnable\": false,\n        \"asyncInvocationType\": false,\n        \"eventRuleFilterPattern\": \"{}\",\n        \"eventSourceConfig\": {\n            \"eventSourceType\": \"RocketMQ\",\n            \"eventSourceParameters\": {\n                \"sourceRocketMQParameters\": {\n                    \"RegionId\": \"cn-hangzhou\",\n                    \"InstanceId\": \"MQ_INST_164901546557****_BAAN****\",\n                    \"GroupID\": \"GID_group1\",\n                    \"Topic\": \"mytopic\",\n                    \"Timestamp\": 1636597951984,\n                    \"Tag\": \"test-tag\",\n                    \"Offset\": \"CONSUME_FROM_LAST_OFFSET\"\n                }\n            }\n        }\n    }\n",
            function=cdktf.Token.as_string(alicloud_fc_function_foo.name),
            name=name.string_value,
            service=cdktf.Token.as_string(alicloud_fc_service_foo.name),
            type="eventbridge"
        )
```

## Module Support

You can use to the existing [fc module](https://registry.terraform.io/modules/terraform-alicloud-modules/fc/alicloud) 
to create several triggers quickly.

## Argument Reference

The following arguments are supported:

* `service` - (Required, ForceNew) The Function Compute service name.
* `function` - (Required, ForceNew) The Function Compute function name.
* `name` - (ForceNew) The Function Compute trigger name. It is the only in one service and is conflict with "name_prefix".
* `name_prefix` - (ForceNew) Setting a prefix to get a only trigger name. It is conflict with "name".
* `role` - (Optional) RAM role arn attached to the Function Compute trigger. Role used by the event source to call the function. The value format is "acs:ram::$account-id:role/$role-name". See [Create a trigger](https://www.alibabacloud.com/help/doc-detail/53102.htm) for more details.
* `source_arn` - (Optional, ForceNew) Event source resource address. See [Create a trigger](https://www.alibabacloud.com/help/doc-detail/53102.htm) for more details.
* `config` - (Optional) The config of Function Compute trigger.It is valid when `type` is not "mns_topic".See [Configure triggers and events](https://www.alibabacloud.com/help/doc-detail/70140.htm) for more details.
* `config_mns` - (Optional, ForceNew, Available in 1.41.0) The config of Function Compute trigger when the type is "mns_topic".It is conflict with `config`.
* `type` - (Required, ForceNew) The Type of the trigger. Valid values: ["oss", "log", "timer", "http", "mns_topic", "cdn_events", "eventbridge"].

-> **NOTE:** Config does not support modification when type is mns_topic.
-> **NOTE:** type = cdn_events, available in 1.47.0+.
-> **NOTE:** type = eventbridge, available in 1.173.0+.

## Attributes Reference

The following arguments are exported:

* `id` - The ID of the function. The value is formate as `<service>:<function>:<name>`.
* `last_modified` - The date this resource was last modified.
* `trigger_id` - The Function Compute trigger ID.

## Import

Function Compute trigger can be imported using the id, e.g.

```shell
$ terraform import alicloud_fc_trigger.foo my-fc-service:hello-world:hello-trigger
```

<!-- cache-key: cdktf-0.17.0-pre.15 input-dfa22fe8e4521b557697a1b10cd3335acad8f2c197237ca7bb38d5bbfc5845b2 -->