---
subcategory: "AliKafka"
layout: "alicloud"
page_title: "Alicloud: alicloud_alikafka_instance"
sidebar_current: "docs-alicloud-resource-alikafka-instance"
description: |-
  Provides a Alicloud ALIKAFKA Instance resource.
---


<!-- Please do not edit this file, it is generated. -->
# alicloud\_alikafka\_instance

Provides an ALIKAFKA instance resource.

For information about ALIKAFKA instance and how to use it, see [What is ALIKAFKA instance](https://www.alibabacloud.com/help/en/message-queue-for-apache-kafka/latest/api-doc-alikafka-2019-09-16-api-doc-startinstance).

-> **NOTE:** Available in 1.59.0+

-> **NOTE:** Creation or modification may took about 10-40 minutes.

-> **NOTE:** Only the following regions support create alikafka pre paid instance.
[`cn-hangzhou`,`cn-beijing`,`cn-shenzhen`,`cn-shanghai`,`cn-qingdao`,`cn-hongkong`,`cn-huhehaote`,`cn-zhangjiakou`,`cn-chengdu`,`cn-heyuan`,`ap-southeast-1`,`ap-southeast-3`,`ap-southeast-5`,`ap-south-1`,`ap-northeast-1`,`eu-central-1`,`eu-west-1`,`us-west-1`,`us-east-1`]

-> **NOTE:** Only the following regions support create alikafka post paid instance. 
[`cn-hangzhou`,`cn-beijing`,`cn-shenzhen`,`cn-shanghai`,`cn-qingdao`,`cn-hongkong`,`cn-huhehaote`,`cn-zhangjiakou`,`cn-chengdu`,`cn-heyuan`,`ap-southeast-1`,`ap-southeast-3`,`ap-southeast-5`,`ap-south-1`,`ap-northeast-1`,`eu-central-1`,`eu-west-1`,`us-west-1`,`us-east-1`]
## Example Usage

Basic Usage

```python
import constructs as constructs
import cdktf as cdktf
# Provider bindings are generated by running cdktf get.
# See https://cdk.tf/provider-generation for more details.
import ...gen.providers.alicloud as alicloud
class MyConvertedCode(cdktf.TerraformStack):
    def __init__(self, scope, name):
        super().__init__(scope, name)
        # Terraform Variables are not always the best fit for getting inputs in the context of Terraform CDK.
        #     You can read more about this at https://cdk.tf/variables
        instance_name = cdktf.TerraformVariable(self, "instance_name",
            default="alikafkaInstanceName"
        )
        alicloud_vpc_default = alicloud.vpc.Vpc(self, "default",
            cidr_block="172.16.0.0/12"
        )
        data_alicloud_zones_default =
        alicloud.data_alicloud_zones.DataAlicloudZones(self, "default_2",
            available_resource_creation="VSwitch"
        )
        # This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.
        data_alicloud_zones_default.override_logical_id("default")
        alicloud_security_group_default =
        alicloud.security_group.SecurityGroup(self, "default_3",
            vpc_id=cdktf.Token.as_string(alicloud_vpc_default.id)
        )
        # This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.
        alicloud_security_group_default.override_logical_id("default")
        alicloud_vswitch_default = alicloud.vswitch.Vswitch(self, "default_4",
            cidr_block="172.16.0.0/24",
            vpc_id=cdktf.Token.as_string(alicloud_vpc_default.id),
            zone_id=cdktf.Token.as_string(
                cdktf.property_access(data_alicloud_zones_default.zones, ["0", "id"]))
        )
        # This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.
        alicloud_vswitch_default.override_logical_id("default")
        alicloud_alikafka_instance_default =
        alicloud.alikafka_instance.AlikafkaInstance(self, "default_5",
            deploy_type=cdktf.Token.as_number("4"),
            disk_size=cdktf.Token.as_number("500"),
            disk_type=cdktf.Token.as_number("1"),
            io_max=cdktf.Token.as_number("20"),
            name=instance_name.string_value,
            partition_num=cdktf.Token.as_number("50"),
            security_group=cdktf.Token.as_string(alicloud_security_group_default.id),
            vswitch_id=cdktf.Token.as_string(alicloud_vswitch_default.id)
        )
        # This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.
        alicloud_alikafka_instance_default.override_logical_id("default")
```

## Argument Reference

The following arguments are supported:

* `name` - (Optional) Name of your Kafka instance. The length should between 3 and 64 characters. If not set, will use instance id as instance name.
* `partition_num` - (Optional, Available in 1.194.0+) The number of partitions.
* `topic_quota` - (Deprecated from 1.194.0) The max num of topic can be creation of the instance. 
  It has been deprecated from version 1.194.0 and using `partition_num` instead.
* `disk_type` - (Required, ForceNew) The disk type of the instance. 0: efficient cloud disk , 1: SSD.
* `disk_size` - (Required) The disk size of the instance. When modify this value, it only supports adjust to a greater value.
* `deploy_type` - (Required) The deployment type of the instance. **NOTE:** From version 1.161.0, this attribute supports to be updated. Valid values:
  - 4: eip/vpc instance
  - 5: vpc instance.
* `io_max` - (Optional, Computed) The max value of io of the instance. When modify this value, it only support adjust to a greater value.
* `io_max_spec` - (Optional, Computed, Available in v1.201.0+) The traffic specification of the instance. We recommend that you configure this parameter.
  - You should specify one of the `io_max` and `io_max_spec` parameters, and `io_max_spec` is recommended.
  - For more information about the valid values, see [Billing](https://www.alibabacloud.com/help/en/message-queue-for-apache-kafka/latest/billing-overview).
* `eip_max` - (Optional) The max bandwidth of the instance. It will be ignored when `deploy_type = 5`. When modify this value, it only supports adjust to a greater value.
* `paid_type` - (Optional) The paid type of the instance. Support two type, "PrePaid": pre paid type instance, "PostPaid": post paid type instance. Default is PostPaid. When modify this value, it only support adjust from post pay to pre pay. 
* `spec_type` - (Optional) The spec type of the instance. Support two type, "normal": normal version instance, "professional": professional version instance. Default is normal. When modify this value, it only support adjust from normal to professional. Note only pre paid type instance support professional specific type.
* `vswitch_id` - (Required, ForceNew) The ID of attaching vswitch to instance.
* `security_group` - (Optional, ForceNew, Available in v1.93.0+) The ID of security group for this instance. If the security group is empty, system will create a default one.
* `service_version` - (Optional, Available in v1.112.0+) The kafka openSource version for this instance. Only 0.10.2 or 2.2.0 is allowed, default is 0.10.2.
* `config` - (Optional, Available in v1.112.0+) The basic config for this instance. The input should be json type, only the following key allowed: enable.acl, enable.vpc_sasl_ssl, kafka.log.retention.hours, kafka.message.max.bytes.
* `kms_key_id` - (Optional, ForceNew, Available in v1.180.0+) The ID of the key that is used to encrypt data on standard SSDs in the region of the instance.
* `tags` - (Optional, Available in v1.63.0+) A mapping of tags to assign to the resource.
* `vpc_id` - (Optional, ForceNew, Available in v1.185.0+) The VPC ID of the instance.
* `zone_id` - (Optional, ForceNew, Available in v1.185.0+) The zone ID of the instance.
* `selected_zones` - (Optional, Available in v1.195.0+) The zones among which you want to deploy the instance.

-> **NOTE:** Arguments io_max, disk_size, topic_quota, eip_max should follow the following constraints.

| io_max | disk_size(min-max:lag) | topic_quota(min-max:lag) | eip_max(min-max:lag) | 
|------|-------------|:----:|:-----:|
|20          |  500-6100:100   |   50-450:1  |    1-160:1  |
|30          |  800-6100:100   |   50-450:1  |    1-240:1  |
|60          |  1400-6100:100  |   80-450:1  |    1-500:1  |
|90          |  2100-6100:100  |   100-450:1 |    1-500:1  |
|120         |  2700-6100:100  |   150-450:1 |    1-500:1  |

### Removing alicloud_alikafka_instance from your configuration
 
The alicloud_alikafka_instance resource allows you to manage your alikafka instance, but Terraform cannot destroy it if your instance type is pre paid(post paid type can destroy normally). Removing this resource from your configuration will remove it from your statefile and management, but will not destroy the instance. You can resume managing the instance via the alikafka Console.
 
## Attributes Reference

The following attributes are exported:

* `id` - The `key` of the resource supplied above, also call instance id.
* `vpc_id` - The ID of attaching VPC to instance.
* `zone_id` - The Zone to launch the kafka instance.
* `end_point` - The EndPoint to access the kafka instance.
* `status` - The status of the instance. Valid values:
  - 0: pending
  - 1: deploying
  - 5: running
  - 15: expired  
  
#### Timeouts

-> **NOTE:** Available in 1.180.0+.

The `timeouts` block allows you to specify [timeouts](https://www.terraform.io/docs/configuration-0-11/resources.html#timeouts) for certain actions:

* `create` - (Defaults to 120 mins) Used when create the resource.
* `update` - (Defaults to 120 mins) Used when update the resource.
* `delete` - (Defaults to 30 mins) Used when delete the resource.

## Import

ALIKAFKA TOPIC can be imported using the id, e.g.

```shell
$ terraform import alicloud_alikafka_instance.instance alikafka_post-cn-123455abc
```

<!-- cache-key: cdktf-0.17.0-pre.15 input-c3cf81557d8be2d74a41838be15f6861be4b419496afdef9d3e7f30dc4f53955 -->