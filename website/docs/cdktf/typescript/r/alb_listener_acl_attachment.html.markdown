---
subcategory: "Application Load Balancer (ALB)"
layout: "alicloud"
page_title: "Alicloud: alicloud_alb_listener_acl_attachment"
sidebar_current: "docs-alicloud-resource-alb-listener-acl-attachment"
description: |-
  Provides a Alicloud Application Load Balancer (ALB) Listener Acl Attachment resource.
---


<!-- Please do not edit this file, it is generated. -->
# alicloud\_alb\_listener\_acl\_attachment

Provides a Application Load Balancer (ALB) Listener Acl Attachment resource.

For information about Application Load Balancer (ALB) Listener Acl Attachment and how to use it, see [What is Listener Acl Attachment](https://www.alibabacloud.com/help/en/server-load-balancer/latest/associateaclswithlistener).

-> **NOTE:** Available in v1.163.0+.

-> **NOTE:** You can associate at most three ACLs with a listener.

-> **NOTE:** You can only configure either a whitelist or a blacklist for listener, not at the same time.

## Example Usage

Basic Usage

```typescript
import * as constructs from "constructs";
import * as cdktf from "cdktf";
/*Provider bindings are generated by running cdktf get.
See https://cdk.tf/provider-generation for more details.*/
import * as alicloud from "./.gen/providers/alicloud";
class MyConvertedCode extends cdktf.TerraformStack {
  constructor(scope: constructs.Construct, name: string) {
    super(scope, name);
    const dataAlicloudAlbZonesDefault =
      new alicloud.dataAlicloudAlbZones.DataAlicloudAlbZones(
        this,
        "default",
        {}
      );
    const dataAlicloudResourceManagerResourceGroupsDefault =
      new alicloud.dataAlicloudResourceManagerResourceGroups.DataAlicloudResourceManagerResourceGroups(
        this,
        "default_1",
        {}
      );
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    dataAlicloudResourceManagerResourceGroupsDefault.overrideLogicalId(
      "default"
    );
    const dataAlicloudVpcsDefault =
      new alicloud.dataAlicloudVpcs.DataAlicloudVpcs(this, "default_2", {
        nameRegex: "default-NODELETING",
      });
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    dataAlicloudVpcsDefault.overrideLogicalId("default");
    const dataAlicloudVswitchesDefault1 =
      new alicloud.dataAlicloudVswitches.DataAlicloudVswitches(
        this,
        "default_1_3",
        {
          vpcId: cdktf.Token.asString(
            cdktf.propertyAccess(dataAlicloudVpcsDefault.ids, ["0"])
          ),
          zoneId: cdktf.Token.asString(
            cdktf.propertyAccess(dataAlicloudAlbZonesDefault.zones, ["0", "id"])
          ),
        }
      );
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    dataAlicloudVswitchesDefault1.overrideLogicalId("default_1");
    const dataAlicloudVswitchesDefault2 =
      new alicloud.dataAlicloudVswitches.DataAlicloudVswitches(
        this,
        "default_2_4",
        {
          vpcId: cdktf.Token.asString(
            cdktf.propertyAccess(dataAlicloudVpcsDefault.ids, ["0"])
          ),
          zoneId: cdktf.Token.asString(
            cdktf.propertyAccess(dataAlicloudAlbZonesDefault.zones, ["1", "id"])
          ),
        }
      );
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    dataAlicloudVswitchesDefault2.overrideLogicalId("default_2");
    const alicloudAlbAclDefault = new alicloud.albAcl.AlbAcl(
      this,
      "default_5",
      {
        aclEntries: [
          {
            description: "description",
            entry: "10.0.0.0/24",
          },
        ],
        aclName: "example_value",
        resourceGroupId: cdktf.Token.asString(
          cdktf.propertyAccess(
            dataAlicloudResourceManagerResourceGroupsDefault.groups,
            ["0", "id"]
          )
        ),
      }
    );
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    alicloudAlbAclDefault.overrideLogicalId("default");
    const alicloudAlbLoadBalancerDefault =
      new alicloud.albLoadBalancer.AlbLoadBalancer(this, "default_6", {
        addressAllocatedMode: "Fixed",
        addressType: "Internet",
        loadBalancerBillingConfig: {
          payType: "PayAsYouGo",
        },
        loadBalancerEdition: "Standard",
        loadBalancerName: "example_value",
        modificationProtectionConfig: {
          status: "NonProtection",
        },
        resourceGroupId: cdktf.Token.asString(
          cdktf.propertyAccess(
            dataAlicloudResourceManagerResourceGroupsDefault.groups,
            ["0", "id"]
          )
        ),
        tags: {
          Created: "TF",
        },
        vpcId: cdktf.Token.asString(
          cdktf.propertyAccess(dataAlicloudVpcsDefault.ids, ["0"])
        ),
        zoneMappings: [
          {
            vswitchId: cdktf.Token.asString(
              cdktf.propertyAccess(dataAlicloudVswitchesDefault1.ids, ["0"])
            ),
            zoneId: cdktf.Token.asString(
              cdktf.propertyAccess(dataAlicloudAlbZonesDefault.zones, [
                "0",
                "id",
              ])
            ),
          },
          {
            vswitchId: cdktf.Token.asString(
              cdktf.propertyAccess(dataAlicloudVswitchesDefault2.ids, ["0"])
            ),
            zoneId: cdktf.Token.asString(
              cdktf.propertyAccess(dataAlicloudAlbZonesDefault.zones, [
                "1",
                "id",
              ])
            ),
          },
        ],
      });
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    alicloudAlbLoadBalancerDefault.overrideLogicalId("default");
    const alicloudAlbServerGroupDefault =
      new alicloud.albServerGroup.AlbServerGroup(this, "default_7", {
        healthCheckConfig: {
          healthCheckEnabled: cdktf.Token.asBoolean("false"),
        },
        protocol: "HTTP",
        resourceGroupId: cdktf.Token.asString(
          cdktf.propertyAccess(
            dataAlicloudResourceManagerResourceGroupsDefault.groups,
            ["0", "id"]
          )
        ),
        serverGroupName: "example_value",
        stickySessionConfig: {
          stickySessionEnabled: cdktf.Token.asBoolean("false"),
        },
        tags: {
          Created: "TF",
        },
        vpcId: cdktf.Token.asString(
          cdktf.propertyAccess(dataAlicloudVpcsDefault.vpcs, ["0", "id"])
        ),
      });
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    alicloudAlbServerGroupDefault.overrideLogicalId("default");
    const alicloudAlbListenerDefault = new alicloud.albListener.AlbListener(
      this,
      "default_8",
      {
        defaultActions: [
          {
            forwardGroupConfig: {
              serverGroupTuples: [
                {
                  serverGroupId: cdktf.Token.asString(
                    alicloudAlbServerGroupDefault.id
                  ),
                },
              ],
            },
            type: "ForwardGroup",
          },
        ],
        listenerDescription: "example_value",
        listenerPort: 80,
        listenerProtocol: "HTTP",
        loadBalancerId: cdktf.Token.asString(alicloudAlbLoadBalancerDefault.id),
      }
    );
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    alicloudAlbListenerDefault.overrideLogicalId("default");
    const alicloudAlbListenerAclAttachmentDefault =
      new alicloud.albListenerAclAttachment.AlbListenerAclAttachment(
        this,
        "default_9",
        {
          aclId: cdktf.Token.asString(alicloudAlbAclDefault.id),
          aclType: "White",
          listenerId: cdktf.Token.asString(alicloudAlbListenerDefault.id),
        }
      );
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    alicloudAlbListenerAclAttachmentDefault.overrideLogicalId("default");
  }
}

```

## Argument Reference

The following arguments are supported:

* `aclId` - (Required, ForceNew) The ID of the Acl.
* `listenerId` - (Required, ForceNew) The ID of the ALB listener.
* `aclType` - (Required, ForceNew) The type of the ACL. Valid values: 
  - White: a whitelist. Only requests from the IP addresses or CIDR blocks in the ACL are forwarded. The whitelist applies to scenarios in which you want to allow only specific IP addresses to access an application. Risks may arise if you specify an ACL as a whitelist. After a whitelist is configured, only IP addresses in the whitelist can access the Application Load Balancer (ALB) listener. If you enable a whitelist but the whitelist does not contain an IP address, the listener forwards all requests. 
  - Black: a blacklist. All requests from the IP addresses or CIDR blocks in the ACL are blocked. The blacklist applies to scenarios in which you want to block access from specific IP addresses to an application. If you enable a blacklist but the blacklist does not contain an IP address, the listener forwards all requests.

## Attributes Reference

The following attributes are exported:

* `id` - The resource ID of Listener Acl Attachment. The value formats as `<listener_id>:<acl_id>`.
* `status` - The status of the Listener Acl Attachment.


### Timeouts

The `timeouts` block allows you to specify [timeouts](https://www.terraform.io/docs/configuration-0-11/resources.html#timeouts) for certain actions:

* `create` - (Defaults to 2 mins) Used when create the Listener Acl Attachment.
* `delete` - (Defaults to 2 mins) Used when delete the Listener Acl Attachment.

## Import

Application Load Balancer (ALB) Listener Acl Attachment can be imported using the id, e.g.

```shell
$ terraform import alicloud_alb_listener_acl_attachment.example <listener_id>:<acl_id>
```
<!-- cache-key: cdktf-0.17.0-pre.15 input-8feb4ec7970c2c587275a9e70fe325c03d4b54227db1dc3a2ca20b50751b0a72 -->