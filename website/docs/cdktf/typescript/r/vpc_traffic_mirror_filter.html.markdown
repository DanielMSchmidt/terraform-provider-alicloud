---
subcategory: "VPC"
layout: "alicloud"
page_title: "Alicloud: alicloud_vpc_traffic_mirror_filter"
sidebar_current: "docs-alicloud-resource-vpc-traffic-mirror-filter"
description: |-
  Provides a Alicloud VPC Traffic Mirror Filter resource.
---


<!-- Please do not edit this file, it is generated. -->
# alicloud_vpc_traffic_mirror_filter

Provides a VPC Traffic Mirror Filter resource. Traffic mirror filter criteria.

For information about VPC Traffic Mirror Filter and how to use it, see [What is Traffic Mirror Filter](https://www.alibabacloud.com/help/doc-detail/207513.htm).

-> **NOTE:** Available in v1.140.0+.

## Example Usage

Basic Usage

```typescript
import * as constructs from "constructs";
import * as cdktf from "cdktf";
/*Provider bindings are generated by running cdktf get.
See https://cdk.tf/provider-generation for more details.*/
import * as alicloud from "./.gen/providers/alicloud";
class MyConvertedCode extends cdktf.TerraformStack {
  constructor(scope: constructs.Construct, name: string) {
    super(scope, name);
    /*Terraform Variables are not always the best fit for getting inputs in the context of Terraform CDK.
    You can read more about this at https://cdk.tf/variables*/
    const name = new cdktf.TerraformVariable(this, "name", {
      default: "terraform-example",
    });
    const alicloudResourceManagerResourceGroupDefault3IXhoa =
      new alicloud.resourceManagerResourceGroup.ResourceManagerResourceGroup(
        this,
        "default3iXhoa",
        {
          displayName: "testname03",
          resourceGroupName: name.stringValue,
        }
      );
    new alicloud.resourceManagerResourceGroup.ResourceManagerResourceGroup(
      this,
      "defaultdNz2qk",
      {
        displayName: "testname04",
        resourceGroupName: "${" + name.value + "}1",
      }
    );
    new alicloud.vpcTrafficMirrorFilter.VpcTrafficMirrorFilter(
      this,
      "default",
      {
        egressRules: [
          {
            action: "accept",
            destinationCidrBlock: "32.0.0.0/4",
            destinationPortRange: "80/80",
            priority: 1,
            protocol: "TCP",
            sourceCidrBlock: "16.0.0.0/4",
            sourcePortRange: "80/80",
          },
        ],
        ingressRules: [
          {
            action: "accept",
            destinationCidrBlock: "10.64.0.0/10",
            destinationPortRange: "80/80",
            priority: 1,
            protocol: "TCP",
            sourceCidrBlock: "10.0.0.0/8",
            sourcePortRange: "80/80",
          },
        ],
        resourceGroupId: cdktf.Token.asString(
          alicloudResourceManagerResourceGroupDefault3IXhoa.id
        ),
        trafficMirrorFilterDescription: "test",
        trafficMirrorFilterName: name.stringValue,
      }
    );
  }
}

```


## Argument Reference

The following arguments are supported:
* `dryRun` - (Optional) Whether to PreCheck only this request. Value:
  - **true**: The check request is sent without creating traffic Image filter conditions. Check items include whether required parameters, request format, and business restrictions are filled in. If the check does not pass, the corresponding error is returned. If the check passes, the error code 'DryRunOperation' is returned '.
  - **false** (default): Sends a normal request, returns a 2xx HTTP status code after passing the check, and directly creates a filter condition.
* `egressRules` - (Optional, ForceNew, Computed, Available in v1.206.0+) Information about the outbound rule. See the following `Block EgressRules`.
* `ingressRules` - (Optional, ForceNew, Computed, Available in v1.206.0+) Inward direction rule information. See the following `Block IngressRules`.
* `resourceGroupId` - (Optional, Computed, Available in v1.206.0+) The ID of the resource group to which the VPC belongs.
* `tags` - (Optional, Map, Available in v1.206.0+) The tags of this resource.
* `trafficMirrorFilterDescription` - (Optional) The description of the TrafficMirrorFilter.
* `trafficMirrorFilterName` - (Optional) The name of the TrafficMirrorFilter.


#### Block EgressRules

The EgressRules supports the following:
* `action` - (Required, ForceNew) Collection strategy for outbound rules. Value:
  - accept: collects network traffic.
  - drop: No network traffic is collected.
* `destinationCidrBlock` - (Optional, ForceNew) DestinationCidrBlock.
* `destinationPortRange` - (Optional, ForceNew) The destination port range of the outbound rule network traffic. The port range is 1 to 65535. Use a forward slash (/) to separate the start port and the end Port. The format is 1/200 and 80/80. Among them, - 1/-1 cannot be set separately, which means that the port is not limited.
-> **NOTE:**  When egresrules. N.Protocol is set to ALL or ICMP, this parameter does not need to be configured, indicating that the port is not restricted.
* `priority` - (Optional, ForceNew) Priority.
* `protocol` - (Required, ForceNew) The type of protocol used by the outbound network traffic to be mirrored. Value:
  - ALL: ALL agreements.
  - ICMP: Network Control Message Protocol.
  - TCP: Transmission Control Protocol.
  - UDP: User Datagram Protocol.
* `sourceCidrBlock` - (Optional, ForceNew) The source address of the outbound rule network traffic.
* `sourcePortRange` - (Optional, ForceNew) The source port range of the outbound rule network traffic. The port range is 1 to 65535. Use a forward slash (/) to separate the start port and the end Port. The format is 1/200 and 80/80. Among them, - 1/-1 cannot be set separately, which means that the port is not limited.
-> **NOTE:**  When egresrules. N.Protocol is set to ALL or ICMP, this parameter does not need to be configured, indicating that the port is not restricted.

#### Block IngressRules

The IngressRules supports the following:
* `action` - (Required, ForceNew) Collection strategy for outbound rules. Value:
  - accept: collects network traffic.
  - drop: No network traffic is collected.
* `destinationCidrBlock` - (Optional, ForceNew) The destination address of the outbound rule network traffic.
* `destinationPortRange` - (Optional, ForceNew) The destination port range of the outbound rule network traffic. The port range is 1 to 65535. Use a forward slash (/) to separate the start port and the end Port. The format is 1/200 and 80/80. Among them, - 1/-1 cannot be set separately, which means that the port is not limited.
-> **NOTE:**  When egresrules. N.Protocol is set to ALL or ICMP, this parameter does not need to be configured, indicating that the port is not restricted.
* `priority` - (Optional, ForceNew) The priority of the outbound rule. The smaller the number, the higher the priority. The maximum value of N is 10, that is, a maximum of 10 Outbound rules can be configured for a filter condition.
* `protocol` - (Required, ForceNew) The type of protocol used by the outbound network traffic to be mirrored. Value:
  - ALL: ALL agreements.
  - ICMP: Network Control Message Protocol.
  - TCP: Transmission Control Protocol.
  - UDP: User Datagram Protocol.
* `sourceCidrBlock` - (Optional, ForceNew) The source address of the outbound rule network traffic.
* `sourcePortRange` - (Optional, ForceNew) The source port range of the outbound rule network traffic. The port range is 1 to 65535. Use a forward slash (/) to separate the start port and the end Port. The format is 1/200 and 80/80. Among them, - 1/-1 cannot be set separately, which means that the port is not limited.
-> **NOTE:**  When egresrules. N.Protocol is set to ALL or ICMP, this parameter does not need to be configured, indicating that the port is not restricted.


## Attributes Reference

The following attributes are exported:
* `id` - The ID of the resource supplied above.
* `status` - The status of the resource.

### Timeouts

The `timeouts` block allows you to specify [timeouts](https://www.terraform.io/docs/configuration-0-11/resources.html#timeouts) for certain actions:
* `create` - (Defaults to 5 mins) Used when create the Traffic Mirror Filter.
* `delete` - (Defaults to 5 mins) Used when delete the Traffic Mirror Filter.
* `update` - (Defaults to 5 mins) Used when update the Traffic Mirror Filter.

## Import

VPC Traffic Mirror Filter can be imported using the id, e.g.

```shell
$ terraform import alicloud_vpc_traffic_mirror_filter.example <id>
```
<!-- cache-key: cdktf-0.17.0-pre.15 input-ca00a77f0eaeda401ac54d2c415657ea28205fbb6bc0a72400a24d345936fab7 -->