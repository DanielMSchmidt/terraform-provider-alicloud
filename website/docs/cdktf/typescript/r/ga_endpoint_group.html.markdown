---
subcategory: "Global Accelerator (GA)"
layout: "alicloud"
page_title: "Alicloud: alicloud_ga_endpoint_group"
sidebar_current: "docs-alicloud-resource-ga-endpoint-group"
description: |-
  Provides a Alicloud Global Accelerator (GA) Endpoint Group resource.
---


<!-- Please do not edit this file, it is generated. -->
# alicloud\_ga\_endpoint\_group

Provides a Global Accelerator (GA) Endpoint Group resource.

For information about Global Accelerator (GA) Endpoint Group and how to use it, see [What is Endpoint Group](https://www.alibabacloud.com/help/en/doc-detail/153259.htm).

-> **NOTE:** Available in v1.113.0+.

-> **NOTE:** Listeners that use different protocols support different types of endpoint groups:
* For a TCP or UDP listener, you can create only one default endpoint group. 
* For an HTTP or HTTPS listener, you can create one default endpoint group and one virtual endpoint group. By default, you can create only one virtual endpoint group. 
  * A default endpoint group refers to the endpoint group that you configure when you create an HTTP or HTTPS listener. 
  * A virtual endpoint group refers to the endpoint group that you can create on the Endpoint Group page after you create a listener.
* After you create a virtual endpoint group for an HTTP or HTTPS listener, you can create a forwarding rule and associate the forwarding rule with the virtual endpoint group. Then, the HTTP or HTTPS listener forwards requests with different destination domain names or paths to the default or virtual endpoint group based on the forwarding rule. This way, you can use one Global Accelerator (GA) instance to accelerate access to multiple domain names or paths. For more information about how to create a forwarding rule, see [Manage forwarding rules](https://www.alibabacloud.com/help/en/doc-detail/204224.htm).

## Example Usage

Basic Usage

```typescript
import * as constructs from "constructs";
import * as cdktf from "cdktf";
/*Provider bindings are generated by running cdktf get.
See https://cdk.tf/provider-generation for more details.*/
import * as alicloud from "./.gen/providers/alicloud";
class MyConvertedCode extends cdktf.TerraformStack {
  constructor(scope: constructs.Construct, name: string) {
    super(scope, name);
    const alicloudEipAddressExample = new alicloud.eipAddress.EipAddress(
      this,
      "example",
      {
        bandwidth: "10",
        internetChargeType: "PayByBandwidth",
      }
    );
    const alicloudGaAcceleratorExample =
      new alicloud.gaAccelerator.GaAccelerator(this, "example_1", {
        autoUseCoupon: true,
        duration: 1,
        spec: "1",
      });
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    alicloudGaAcceleratorExample.overrideLogicalId("example");
    const alicloudGaBandwidthPackageDe =
      new alicloud.gaBandwidthPackage.GaBandwidthPackage(this, "de", {
        bandwidth: cdktf.Token.asNumber("100"),
        bandwidthType: "Basic",
        billingType: "PayBy95",
        paymentType: "PayAsYouGo",
        ratio: 30,
        type: "Basic",
      });
    const alicloudGaBandwidthPackageAttachmentDe =
      new alicloud.gaBandwidthPackageAttachment.GaBandwidthPackageAttachment(
        this,
        "de_3",
        {
          acceleratorId: cdktf.Token.asString(alicloudGaAcceleratorExample.id),
          bandwidthPackageId: cdktf.Token.asString(
            alicloudGaBandwidthPackageDe.id
          ),
        }
      );
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    alicloudGaBandwidthPackageAttachmentDe.overrideLogicalId("de");
    const alicloudGaListenerExample = new alicloud.gaListener.GaListener(
      this,
      "example_4",
      {
        acceleratorId: cdktf.Token.asString(alicloudGaAcceleratorExample.id),
        dependsOn: [alicloudGaBandwidthPackageAttachmentDe],
        portRanges: [
          {
            fromPort: 60,
            toPort: 70,
          },
        ],
      }
    );
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    alicloudGaListenerExample.overrideLogicalId("example");
    const alicloudGaEndpointGroupExample =
      new alicloud.gaEndpointGroup.GaEndpointGroup(this, "example_5", {
        acceleratorId: cdktf.Token.asString(alicloudGaAcceleratorExample.id),
        endpointConfigurations: [
          {
            endpoint: cdktf.Token.asString(alicloudEipAddressExample.ipAddress),
            type: "PublicIp",
            weight: cdktf.Token.asNumber("20"),
          },
        ],
        endpointGroupRegion: "cn-hangzhou",
        listenerId: cdktf.Token.asString(alicloudGaListenerExample.id),
      });
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    alicloudGaEndpointGroupExample.overrideLogicalId("example");
  }
}

```

## Argument Reference

The following arguments are supported:

* `acceleratorId` - (Required, ForceNew) The ID of the Global Accelerator instance to which the endpoint group will be added.
* `description` - (Optional) The description of the endpoint group.
* `endpointConfigurations` - (Required) The endpointConfigurations of the endpoint group. See the following `Block endpoint_configurations`.
* `endpointGroupRegion` - (Required, ForceNew) The ID of the region where the endpoint group is deployed.
* `endpointGroupType` - (Optional, ForceNew, Computed) The endpoint group type. Valid values: `default`, `virtual`. Default value is `default`.

-> **NOTE:** Only the listening instance of HTTP or HTTPS protocol supports the creation of virtual terminal node group.
    
* `endpointRequestProtocol` - (Optional) The endpoint request protocol. Valid value: `http`, `https`.

-> **NOTE:** This item is only supported when creating terminal node group for listening instance of HTTP or HTTPS protocol. For the listening instance of HTTP protocol, the back-end service protocol supports and only supports HTTP.

* `healthCheckIntervalSeconds` - (Optional) The interval between two consecutive health checks. Unit: seconds.
* `healthCheckPath` - (Optional) The path specified as the destination of the targets for health checks.
* `healthCheckPort` - (Optional) The port that is used for health checks.
* `healthCheckProtocol` - (Optional) The protocol that is used to connect to the targets for health checks. Valid values: `http`, `https`, `tcp`.
* `listenerId` - (Required, ForceNew) The ID of the listener that is associated with the endpoint group.
* `name` - (Optional) The name of the endpoint group.
* `portOverrides` - (Optional) Mapping between listening port and forwarding port of boarding point. See the following `Block port_overrides`.

-> **NOTE:** Port mapping is only supported when creating terminal node group for listening instance of HTTP or HTTPS protocol. The listening port in the port map must be consistent with the listening port of the current listening instance.

* `thresholdCount` - (Optional) The number of consecutive failed heath checks that must occur before the endpoint is deemed unhealthy. Default value is `3`.
* `trafficPercentage` - (Optional) The weight of the endpoint group when the corresponding listener is associated with multiple endpoint groups.

#### Block port_overrides

The port_overrides supports the following: 

* `endpointPort` - (Optional) Forwarding port.
* `listenerPort` - (Optional) Listener port.

#### Block endpoint_configurations

The endpoint_configurations supports the following: 

* `enableClientipPreservation` - (Optional, Computed) Indicates whether client IP addresses are reserved. Valid values: `true`: Client IP addresses are reserved, `false`: Client IP addresses are not reserved. Default value is `false`.
* `endpoint` - (Required) The IP address or domain name of Endpoint N in the endpoint group.
* `type` - (Required) The type of Endpoint N in the endpoint group. Valid values: `domain`: a custom domain name, `ip`: a custom IP address, `publicIp`: an Alibaba Cloud public IP address, `ecs`: an Alibaba Cloud Elastic Compute Service (ECS) instance, `slb`: an Alibaba Cloud Server Load Balancer (SLB) instance.

-> **NOTE:** When the terminal node type is ECS or SLB, if the service association role does not exist, the system will automatically create a service association role named aliyunserviceroleforgavpcndpoint.

* `weight` - (Required) The weight of Endpoint N in the endpoint group. Valid value is 0 to 255.

-> **NOTE:** If the weight of a terminal node is set to 0, global acceleration will terminate the distribution of traffic to the terminal node. Please be careful.
             
## Attributes Reference

The following attributes are exported:

* `id` - The resource ID in terraform of Endpoint Group.
* `status` - The status of the endpoint group.

### Timeouts

The `timeouts` block allows you to specify [timeouts](https://www.terraform.io/docs/configuration-0-11/resources.html#timeouts) for certain actions:

* `create` - (Defaults to 10 mins) Used when create the Endpoint Group.
* `update` - (Defaults to 2 mins) Used when update the Endpoint Group.
* `delete` - (Defaults to 6 mins) Used when delete the Endpoint Group.

## Import

Ga Endpoint Group can be imported using the id, e.g.

```shell
$ terraform import alicloud_ga_endpoint_group.example <id>
```

<!-- cache-key: cdktf-0.17.0-pre.15 input-14fe2790651030d5d1ed65703403024635a9d4216aabab5f59a7557e16197299 -->