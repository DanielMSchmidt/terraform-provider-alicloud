---
subcategory: "Application Load Balancer (ALB)"
layout: "alicloud"
page_title: "Alicloud: alicloud_alb_load_balancer_common_bandwidth_package_attachment"
sidebar_current: "docs-alicloud-resource-alb-load-balancer-common-bandwidth-package-attachment"
description: |-
  Provides a Alicloud Alb Load Balancer Common Bandwidth Package Attachment resource.
---


<!-- Please do not edit this file, it is generated. -->
# alicloud_alb_load_balancer_common_bandwidth_package_attachment

Provides a Alb Load Balancer Common Bandwidth Package Attachment resource.

For information about Alb Load Balancer Common Bandwidth Package Attachment and how to use it, see [What is Load Balancer Common Bandwidth Package Attachment](https://www.alibabacloud.com/help/en/server-load-balancer/latest/attachcommonbandwidthpackagetoloadbalancer).

-> **NOTE:** Available in v1.200.0+.

## Example Usage

Basic Usage

```typescript
import * as constructs from "constructs";
import * as cdktf from "cdktf";
/*Provider bindings are generated by running cdktf get.
See https://cdk.tf/provider-generation for more details.*/
import * as alicloud from "./.gen/providers/alicloud";
class MyConvertedCode extends cdktf.TerraformStack {
  constructor(scope: constructs.Construct, name: string) {
    super(scope, name);
    /*Terraform Variables are not always the best fit for getting inputs in the context of Terraform CDK.
    You can read more about this at https://cdk.tf/variables*/
    const name = new cdktf.TerraformVariable(this, "name", {
      default: "example_name",
    });
    const alicloudCommonBandwidthPackageDefault =
      new alicloud.commonBandwidthPackage.CommonBandwidthPackage(
        this,
        "default",
        {
          bandwidth: cdktf.Token.asString(3),
          internetChargeType: "PayByBandwidth",
        }
      );
    const dataAlicloudAlbZonesDefault =
      new alicloud.dataAlicloudAlbZones.DataAlicloudAlbZones(
        this,
        "default_2",
        {}
      );
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    dataAlicloudAlbZonesDefault.overrideLogicalId("default");
    const dataAlicloudVpcsDefault =
      new alicloud.dataAlicloudVpcs.DataAlicloudVpcs(this, "default_3", {
        nameRegex: "^default-NODELETING$",
      });
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    dataAlicloudVpcsDefault.overrideLogicalId("default");
    const dataAlicloudVswitchesDefault1 =
      new alicloud.dataAlicloudVswitches.DataAlicloudVswitches(
        this,
        "default_1",
        {
          vpcId: cdktf.Token.asString(
            cdktf.propertyAccess(dataAlicloudVpcsDefault.ids, ["0"])
          ),
          zoneId: cdktf.Token.asString(
            cdktf.propertyAccess(dataAlicloudAlbZonesDefault.zones, ["0", "id"])
          ),
        }
      );
    const dataAlicloudVswitchesDefault2 =
      new alicloud.dataAlicloudVswitches.DataAlicloudVswitches(
        this,
        "default_2_5",
        {
          vpcId: cdktf.Token.asString(
            cdktf.propertyAccess(dataAlicloudVpcsDefault.ids, ["0"])
          ),
          zoneId: cdktf.Token.asString(
            cdktf.propertyAccess(dataAlicloudAlbZonesDefault.zones, ["1", "id"])
          ),
        }
      );
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    dataAlicloudVswitchesDefault2.overrideLogicalId("default_2");
    /*In most cases loops should be handled in the programming language context and 
    not inside of the Terraform context. If you are looping over something external, e.g. a variable or a file input
    you should consider using a for loop. If you are looping over something only known to Terraform, e.g. a result of a data source
    you need to keep this like it is.*/
    const alicloudVswitchVswitch1Count = cdktf.TerraformCount.of(
      cdktf.Token.asNumber(
        cdktf.conditional(
          cdktf.Op.gt(cdktf.Fn.lengthOf(dataAlicloudVswitchesDefault1.ids), 0),
          0,
          1
        )
      )
    );
    const alicloudVswitchVswitch1 = new alicloud.vswitch.Vswitch(
      this,
      "vswitch_1",
      {
        cidrBlock: cdktf.Fn.cidrsubnet(
          cdktf.Token.asString(
            cdktf.propertyAccess(dataAlicloudVpcsDefault.vpcs, [
              "0",
              "cidr_block",
            ])
          ),
          8,
          2
        ),
        vpcId: cdktf.Token.asString(
          cdktf.propertyAccess(dataAlicloudVpcsDefault.ids, ["0"])
        ),
        vswitchName: name.stringValue,
        zoneId: cdktf.Token.asString(
          cdktf.propertyAccess(dataAlicloudAlbZonesDefault.zones, ["0", "id"])
        ),
        count: alicloudVswitchVswitch1Count,
      }
    );
    /*In most cases loops should be handled in the programming language context and 
    not inside of the Terraform context. If you are looping over something external, e.g. a variable or a file input
    you should consider using a for loop. If you are looping over something only known to Terraform, e.g. a result of a data source
    you need to keep this like it is.*/
    const alicloudVswitchVswitch2Count = cdktf.TerraformCount.of(
      cdktf.Token.asNumber(
        cdktf.conditional(
          cdktf.Op.gt(cdktf.Fn.lengthOf(dataAlicloudVswitchesDefault2.ids), 0),
          0,
          1
        )
      )
    );
    const alicloudVswitchVswitch2 = new alicloud.vswitch.Vswitch(
      this,
      "vswitch_2",
      {
        cidrBlock: cdktf.Fn.cidrsubnet(
          cdktf.Token.asString(
            cdktf.propertyAccess(dataAlicloudVpcsDefault.vpcs, [
              "0",
              "cidr_block",
            ])
          ),
          8,
          4
        ),
        vpcId: cdktf.Token.asString(
          cdktf.propertyAccess(dataAlicloudVpcsDefault.ids, ["0"])
        ),
        vswitchName: name.stringValue,
        zoneId: cdktf.Token.asString(
          cdktf.propertyAccess(dataAlicloudAlbZonesDefault.zones, ["1", "id"])
        ),
        count: alicloudVswitchVswitch2Count,
      }
    );
    const alicloudAlbLoadBalancerDefault =
      new alicloud.albLoadBalancer.AlbLoadBalancer(this, "default_8", {
        addressAllocatedMode: "Fixed",
        addressType: "Internet",
        loadBalancerBillingConfig: {
          payType: "PayAsYouGo",
        },
        loadBalancerEdition: "Standard",
        loadBalancerName: name.stringValue,
        vpcId: cdktf.Token.asString(
          cdktf.propertyAccess(dataAlicloudVpcsDefault.ids, ["0"])
        ),
        zoneMappings: [
          {
            vswitchId: cdktf.Token.asString(
              cdktf.conditional(
                cdktf.Op.gt(
                  cdktf.Fn.lengthOf(dataAlicloudVswitchesDefault1.ids),
                  0
                ),
                cdktf.propertyAccess(dataAlicloudVswitchesDefault1.ids, ["0"]),
                cdktf.propertyAccess(
                  cdktf.Fn.concat([
                    cdktf.propertyAccess(alicloudVswitchVswitch1, ["*", "id"]),
                    [""],
                  ]),
                  ["0"]
                )
              )
            ),
            zoneId: cdktf.Token.asString(
              cdktf.propertyAccess(dataAlicloudAlbZonesDefault.zones, [
                "0",
                "id",
              ])
            ),
          },
          {
            vswitchId: cdktf.Token.asString(
              cdktf.conditional(
                cdktf.Op.gt(
                  cdktf.Fn.lengthOf(dataAlicloudVswitchesDefault2.ids),
                  0
                ),
                cdktf.propertyAccess(dataAlicloudVswitchesDefault2.ids, ["0"]),
                cdktf.propertyAccess(
                  cdktf.Fn.concat([
                    cdktf.propertyAccess(alicloudVswitchVswitch2, ["*", "id"]),
                    [""],
                  ]),
                  ["0"]
                )
              )
            ),
            zoneId: cdktf.Token.asString(
              cdktf.propertyAccess(dataAlicloudAlbZonesDefault.zones, [
                "1",
                "id",
              ])
            ),
          },
        ],
      });
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    alicloudAlbLoadBalancerDefault.overrideLogicalId("default");
    const alicloudAlbLoadBalancerCommonBandwidthPackageAttachmentDefault =
      new alicloud.albLoadBalancerCommonBandwidthPackageAttachment.AlbLoadBalancerCommonBandwidthPackageAttachment(
        this,
        "default_9",
        {
          bandwidthPackageId: cdktf.Token.asString(
            alicloudCommonBandwidthPackageDefault.id
          ),
          loadBalancerId: cdktf.Token.asString(
            alicloudAlbLoadBalancerDefault.id
          ),
        }
      );
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    alicloudAlbLoadBalancerCommonBandwidthPackageAttachmentDefault.overrideLogicalId(
      "default"
    );
  }
}

```

## Argument Reference

The following arguments are supported:
* `bandwidthPackageId` - (Required,ForceNew) The ID of the bound shared bandwidth package.
* `dryRun` - (Optional) Whether to PreCheck this request only. Value:-**true**: sends a check request and does not bind the shared bandwidth package to the load balancing instance. Check items include whether required parameters, request format, and business restrictions have been filled in. If the check fails, the corresponding error is returned. If the check passes, the error code 'DryRunOperation' is returned '.-**false** (default): Sends a normal request, returns the HTTP 2xx status code after the check, and directly performs the operation.
* `loadBalancerId` - (Required,ForceNew) The ID of the applied server load balancer instance.



## Attributes Reference

The following attributes are exported:
* `id` - The `key` of the resource supplied above.The value is formulated as `<load_balancer_id>:<bandwidth_package_id>`.
* `status` - The status of the Application Load balancing instance. Value:-**Inactive**: Stopped, indicating that the instance listener will no longer forward traffic.-**Active**: running.-**Provisioning**: The project is being created.-**Configuring**: The configuration is being changed.-**CreateFailed**: The instance cannot be deleted without any charge.

### Timeouts

The `timeouts` block allows you to specify [timeouts](https://www.terraform.io/docs/configuration-0-11/resources.html#timeouts) for certain actions:
* `create` - (Defaults to 5 mins) Used when create the Load Balancer Common Bandwidth Package Attachment.
* `delete` - (Defaults to 5 mins) Used when delete the Load Balancer Common Bandwidth Package Attachment.

## Import

Alb Load Balancer Common Bandwidth Package Attachment can be imported using the id, e.g.

```shell
$ terraform import alicloud_alb_load_balancer_common_bandwidth_package_attachment.example <load_balancer_id>:<bandwidth_package_id>
```
<!-- cache-key: cdktf-0.17.0-pre.15 input-e83a6c950ed9b4a97a261d9c38a2158f2f7420226165498ce7a3ab5e9f87e821 -->