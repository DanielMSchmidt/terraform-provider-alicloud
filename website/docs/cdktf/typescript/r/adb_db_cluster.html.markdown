---
subcategory: "AnalyticDB for MySQL (ADB)"
layout: "alicloud"
page_title: "Alicloud: alicloud_adb_db_cluster"
sidebar_current: "docs-alicloud-resource-adb-db-cluster"
description: |-
  Provides a Alicloud AnalyticDB for MySQL (ADB) DBCluster resource.
---


<!-- Please do not edit this file, it is generated. -->
# alicloud\_adb\_db\_cluster

Provides a AnalyticDB for MySQL (ADB) DBCluster resource.

For information about AnalyticDB for MySQL (ADB) DBCluster and how to use it, see [What is DBCluster](https://www.alibabacloud.com/help/en/doc-detail/190519.htm).

-> **NOTE:** Available in v1.121.0+.

## Example Usage

Basic Usage

```typescript
import * as constructs from "constructs";
import * as cdktf from "cdktf";
/*Provider bindings are generated by running cdktf get.
See https://cdk.tf/provider-generation for more details.*/
import * as alicloud from "./.gen/providers/alicloud";
class MyConvertedCode extends cdktf.TerraformStack {
  constructor(scope: constructs.Construct, name: string) {
    super(scope, name);
    /*Terraform Variables are not always the best fit for getting inputs in the context of Terraform CDK.
    You can read more about this at https://cdk.tf/variables*/
    const creation = new cdktf.TerraformVariable(this, "creation", {
      default: "ADB",
    });
    const name = new cdktf.TerraformVariable(this, "name", {
      default: "adbClusterconfig",
    });
    const alicloudVpcDefault = new alicloud.vpc.Vpc(this, "default", {
      cidrBlock: "172.16.0.0/16",
      vpcName: name.stringValue,
    });
    const dataAlicloudZonesDefault =
      new alicloud.dataAlicloudZones.DataAlicloudZones(this, "default_3", {
        availableResourceCreation: creation.stringValue,
      });
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    dataAlicloudZonesDefault.overrideLogicalId("default");
    const alicloudVswitchDefault = new alicloud.vswitch.Vswitch(
      this,
      "default_4",
      {
        cidrBlock: "172.16.0.0/24",
        vpcId: cdktf.Token.asString(alicloudVpcDefault.id),
        vswitchName: name.stringValue,
        zoneId: cdktf.Token.asString(
          cdktf.propertyAccess(dataAlicloudZonesDefault.zones, ["0", "id"])
        ),
      }
    );
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    alicloudVswitchDefault.overrideLogicalId("default");
    new alicloud.adbDbCluster.AdbDbCluster(this, "this", {
      dbClusterCategory: "Cluster",
      dbClusterVersion: "3.0",
      dbNodeClass: "C8",
      dbNodeCount: cdktf.Token.asNumber("4"),
      dbNodeStorage: cdktf.Token.asNumber("400"),
      description: "Test new adb again.",
      maintainTime: "23:00Z-00:00Z",
      mode: "reserver",
      paymentType: "PayAsYouGo",
      resourceGroupId: "rg-aek2s7ylxx6****",
      securityIps: ["10.168.1.12", "10.168.1.11"],
      tags: {
        Created: "TF-update",
        For: "acceptance-test-update",
      },
      vswitchId: cdktf.Token.asString(alicloudVswitchDefault.id),
    });
  }
}

```

## Argument Reference

The following arguments are supported:

* `autoRenewPeriod` - (Optional) Auto-renewal period of an cluster, in the unit of the month. It is valid when `paymentType` is `subscription`. Valid values: `1`, `2`, `3`, `6`, `12`, `24`, `36`. Default to `1`.
* `computeResource` - (Optional) The specifications of computing resources in elastic mode. The increase of resources can speed up queries. AnalyticDB for MySQL automatically scales computing resources. For more information, see [ComputeResource](https://www.alibabacloud.com/help/en/doc-detail/144851.htm)
* `dbClusterCategory` - (Required) The db cluster category. Valid values: `basic`, `cluster`, `mixedStorage`.
* `dbClusterClass` - (Deprecated from v1.121.2+) It duplicates with attribute db_node_class and is deprecated from 1.121.2.
* `dbClusterVersion` - (Optional, ForceNew) The db cluster version. Value options: `30`, Default to `30`.
* `dbNodeClass` - (Optional, Computed) The db node class. For more information, see [DBClusterClass](https://help.aliyun.com/document_detail/190519.html)
* `dbNodeCount` - (Optional) The db node count.
* `dbNodeStorage` - (Optional) The db node storage.
* `description` - (Optional, Computed) The description of DBCluster.
* `elasticIoResource` - (Optional, Computed) The elastic io resource.
* `maintainTime` - (Optional, Computed) The maintenance window of the cluster. Format: hh:mmZ-hh:mmZ.
* `mode` - (Required) The mode of the cluster. Valid values: `reserver`, `flexible`.
* `modifyType` - (Optional) The modify type.
* `payType` - (Optional, Computed) Field `payType` has been deprecated. New field `paymentType` instead.
* `paymentType` - (Optional, Computed) The payment type of the resource. Valid values are `payAsYouGo` and `subscription`. Default to `payAsYouGo`. **Note:** The `paymentType` supports updating from v1.166.0+. 
* `period` - (Optional) The duration that you will buy DB cluster (in month). It is valid when `paymentType` is `subscription`. Valid values: [1~9], 12, 24, 36.
-> **NOTE:** The attribute `period` is only used to create Subscription instance or modify the PayAsYouGo instance to Subscription. Once effect, it will not be modified that means running `terraform apply` will not affect the resource.
* `renewalStatus` - (Optional) Valid values are `autoRenewal`, `normal`, `notRenewal`, Default to `notRenewal`.
* `resourceGroupId` - (Optional, Computed) The ID of the resource group.
* `securityIps` - (Optional, Computed) List of IP addresses allowed to access all databases of an cluster. The list contains up to 1,000 IP addresses, separated by commas. Supported formats include 0.0.0.0/0, 10.23.12.24 (IP), and 10.23.12.24/24 (Classless Inter-Domain Routing (CIDR) mode. /24 represents the length of the prefix in an IP address. The range of the prefix length is [1,32]).
* `vswitchId` - (Optional, ForceNew) The vswitch id.
* `zoneId` - (Optional, Computed, ForceNew) The zone ID of the resource.
* `vpcId` - (Optional, Computed, ForceNew, Available in 1.178.0+) The vpc ID of the resource.
* `tags` - (Optional) A mapping of tags to assign to the resource.
    - Key: It can be up to 64 characters in length. It cannot begin with "aliyun", "acs:", "http://", or "https://". It cannot be a null string.
    - Value: It can be up to 128 characters in length. It cannot begin with "aliyun", "acs:", "http://", or "https://". It can be a null string.

-> **NOTE:** Because of data backup and migration, change DB cluster type and storage would cost 15~30 minutes. Please make full preparation before changing them.

### Removing alicloud_adb_cluster from your configuration
 
The alicloud_adb_cluster resource allows you to manage your adb cluster, but Terraform cannot destroy it if your cluster type is pre paid(post paid type can destroy normally). Removing this resource from your configuration will remove it from your statefile and management, but will not destroy the cluster. You can resume managing the cluster via the adb Console.

## Attributes Reference

The following attributes are exported:

* `id` - The resource ID in terraform of DBCluster.
* `connectionString` - The connection string of the cluster.
* `port` - (Available in 1.196.0+) The connection port of the ADB cluster.
* `status` - The status of the resource.

### Timeouts

The `timeouts` block allows you to specify [timeouts](https://www.terraform.io/docs/configuration-0-11/resources.html#timeouts) for certain actions:

* `create` - (Defaults to 120 mins) Used when create the DBCluster.
* `delete` - (Defaults to 3 hours) Used when delete the DBCluster.
* `update` - (Defaults to 6  hours) Used when update the DBCluster.

## Import

AnalyticDB for MySQL (ADB) DBCluster can be imported using the id, e.g.

```shell
$ terraform import alicloud_adb_db_cluster.example <id>
```

<!-- cache-key: cdktf-0.17.0-pre.15 input-a6f872cac2ae274a490114d257a44f0c0882b0fbd53e0a7a162f3cf677f58f79 -->