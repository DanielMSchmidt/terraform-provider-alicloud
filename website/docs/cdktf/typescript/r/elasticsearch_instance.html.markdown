---
subcategory: "Elasticsearch"
layout: "alicloud"
page_title: "Alicloud: alicloud_elasticsearch_instance"
sidebar_current: "docs-alicloud-resource-elasticsearch-instance"
description: |-
  Provides a Alicloud Elasticsearch instance resource.
---


<!-- Please do not edit this file, it is generated. -->
# alicloud\_elasticsearch\_instance

Provides a Elasticsearch instance resource. It contains data nodes, dedicated master node(optional) and etc. It can be associated with private IP whitelists and kibana IP whitelist.

-> **NOTE:** Only one operation is supported in a request. So if `dataNodeSpec` and `dataNodeDiskSize` are both changed, system will respond error.

-> **NOTE:** At present, `version` can not be modified once instance has been created.

## Example Usage

Basic Usage

```typescript
import * as constructs from "constructs";
import * as cdktf from "cdktf";
/*Provider bindings are generated by running cdktf get.
See https://cdk.tf/provider-generation for more details.*/
import * as alicloud from "./.gen/providers/alicloud";
class MyConvertedCode extends cdktf.TerraformStack {
  constructor(scope: constructs.Construct, name: string) {
    super(scope, name);
    new alicloud.elasticsearchInstance.ElasticsearchInstance(this, "instance", {
      clientNodeAmount: cdktf.Token.asNumber("2"),
      clientNodeSpec: "elasticsearch.sn2ne.large",
      dataNodeAmount: cdktf.Token.asNumber("2"),
      dataNodeDiskSize: cdktf.Token.asNumber("20"),
      dataNodeDiskType: "cloud_ssd",
      dataNodeSpec: "elasticsearch.sn2ne.large",
      description: "description",
      instanceChargeType: "PostPaid",
      password: "Your password",
      protocol: "HTTPS",
      tags: {
        key1: "value1",
        key2: "value2",
      },
      version: "5.5.3_with_X-Pack",
      vswitchId: "some vswitch id",
      zoneCount: cdktf.Token.asNumber("2"),
    });
  }
}

```
## Argument Reference

The following arguments are supported:

* `description` - (Optional, Computed) The description of instance. It a string of 0 to 30 characters.
* `instanceChargeType` - (Optional) Valid values are `prePaid`, `postPaid`. Default to `postPaid`. From version 1.69.0, the Elasticsearch cluster allows you to update your instance_charge_ype from `postPaid` to `prePaid`, the following attributes are required: `period`. But, updating from `postPaid` to `prePaid` is not supported.
* `period` - (Optional) The duration that you will buy Elasticsearch instance (in month). It is valid when instance_charge_type is `prePaid`. Valid values: [1~9], 12, 24, 36. Default to 1. From version 1.69.2, when to modify this value, the resource can renewal a `prePaid` instance.
* `dataNodeAmount` - (Required) The Elasticsearch cluster's data node quantity, between 2 and 50.
* `dataNodeSpec` - (Required) The data node specifications of the Elasticsearch instance.
* `dataNodeDiskSize` - (Required) The single data node storage space.
  - `cloudSsd`: An SSD disk, supports a maximum of 2048 GiB (2 TB).
  - `cloudEfficiency` An ultra disk, supports a maximum of 5120 GiB (5 TB). If the data to be stored is larger than 2048 GiB, an ultra disk can only support the following data sizes (GiB): [`2560`, `3072`, `3584`, `4096`, `4608`, `5120`].
* `dataNodeDiskType` - (Required) The data node disk type. Supported values: cloud_ssd, cloud_efficiency.
* `dataNodeDiskEncrypted` - (Optional, ForceNew, Available in 1.86.0+) If encrypt the data node disk. Valid values are `true`, `false`. Default to `false`.
* `vswitchId` - (Required, ForceNew) The ID of VSwitch.
* `password` - (Optional, Sensitive) The password of the instance. The password can be 8 to 30 characters in length and must contain three of the following conditions: uppercase letters, lowercase letters, numbers, and special characters (`!@#$%^&*()_+-=`).
* `kmsEncryptedPassword` - (Optional, Available in 1.57.1+) An KMS encrypts password used to a instance. If the `password` is filled in, this field will be ignored, but you have to specify one of `password` and `kmsEncryptedPassword` fields.
* `kmsEncryptionContext` - (Optional, MapString, Available in 1.57.1+) An KMS encryption context used to decrypt `kmsEncryptedPassword` before creating or updating instance with `kmsEncryptedPassword`. See [Encryption Context](https://www.alibabacloud.com/help/doc-detail/42975.htm). It is valid when `kmsEncryptedPassword` is set.
* `version` - (Required, ForceNew) Elasticsearch version. Supported values: `553WithXPack`, `63WithXPack`, `67WithXPack`, `68WithXPack`, `74WithXPack` and `77WithXPack`.
* `privateWhitelist` - (Optional) Set the instance's IP whitelist in VPC network.
* `publicWhitelist` - (Optional) Set the instance's IP whitelist in internet network.
* `enablePublic` - (Optional, Available in v1.87.0+) Bool, default to false. When it set to true, the instance can enable public network access。
* `kibanaWhitelist` - (Optional) Set the Kibana's IP whitelist in internet network.
* `enableKibanaPublicNetwork` - (Optional, Available in v1.87.0+) Bool, default to true. When it set to false, the instance can enable kibana public network access。
* `kibanaPrivateWhitelist` - (Optional, Available in v1.87.0+) Set the Kibana's IP whitelist in private network.
* `enableKibanaPrivateNetwork` - (Optional, Available in v1.87.0+) Bool, default to false. When it set to true, the instance can close kibana private network access。
* `masterNodeSpec` - (Optional) The dedicated master node spec. If specified, dedicated master node will be created.
* `clientNodeAmount` - (Optional, Available in v1.101.0+) The Elasticsearch cluster's client node quantity, between 2 and 25.
* `clientNodeSpec` - (Optional, Available in v1.101.0+) The client node spec. If specified, client node will be created.
* `kibanaNodeSpec` - (Optional, Available in v1.163.0 +) The kibana node specifications of the Elasticsearch instance. Default is `elasticsearchN4Small`.
* `protocol` - (Optional, Available in v1.101.0+) Elasticsearch protocol. Supported values: `http`, `https`.default is `http`.
* `zoneCount` - (Optional, ForceNew, Available in 1.44.0+) The Multi-AZ supported for Elasticsearch, between 1 and 3. The `dataNodeAmount` value must be an integral multiple of the `zoneCount` value.
* `tags` - (Optional, Available in v1.73.0+) A mapping of tags to assign to the resource. 
  - key: It can be up to 128 characters in length. It cannot begin with "aliyun", "acs:". It cannot contain "http://" and "https://". It cannot be a null string.
  - value: It can be up to 128 characters in length. It cannot contain "http://" and "https://". It can be a null string.
* `resourceGroupId` - (Optional, ForceNew, Computed, Available in v1.86.0+) The Id of resource group which the Elasticsearch instance belongs.
* `settingConfig` - (Optional, Computed, Available in v1.125.0+) The YML configuration of the instance.[Detailed introduction](https://www.alibabacloud.com/help/doc-detail/61336.html). 

### Timeouts

-> **NOTE:** Available in 1.48.0+.

The `timeouts` block allows you to specify [timeouts](https://www.terraform.io/docs/configuration-0-11/resources.html#timeouts) for certain actions:

* `create` - (Defaults to 120 mins) Used when creating the elasticsearch instance (until it reaches the initial `active` status). 
* `update` - (Defaults to 120 mins) Used when activating the elasticsearch instance when necessary during update - e.g. when changing elasticsearch instance description, whitelist, data node settings, master node spec and password.
* `delete` - (Defaults to 120 mins) Used when terminating the elasticsearch instance. `note`: There are 5 minutes to sleep to eusure the instance is deleted. It is not in the timeouts configure.

## Attributes Reference

The following attributes are exported:

* `id` - The ID of the Elasticsearch instance.
* `domain` - Instance connection domain (only VPC network access supported).
* `port` - Instance connection port.
* `publicDomain` - (Available in 1.197.0+) Instance connection public domain.
* `publicPort` - (Available in 1.197.0+) Instance connection public port.
* `kibanaDomain` - Kibana console domain (Internet access supported).
* `kibanaPort` - Kibana console port.
* `status` - The Elasticsearch instance status. Includes `active`, `activating`, `inactive`. Some operations are denied when status is not `active`.

## Import

Elasticsearch can be imported using the id, e.g.

```shell
$ terraform import alicloud_elasticsearch_instance.example es-cn-abcde123456
```


<!-- cache-key: cdktf-0.17.0-pre.15 input-33a2fdd651c88e0f642e4011e6dc6ea371d8cabb2a123a2214547b2b82e1c97a -->