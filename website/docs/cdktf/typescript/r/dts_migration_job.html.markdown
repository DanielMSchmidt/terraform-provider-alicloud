---
subcategory: "Data Transmission Service (DTS)"
layout: "alicloud"
page_title: "Alicloud: alicloud_dts_migration_job"
sidebar_current: "docs-alicloud-resource-dts-migration-job"
description: |-
  Provides a Alicloud DTS Migration Job resource.
---


<!-- Please do not edit this file, it is generated. -->
# alicloud\_dts\_migration\_job

Provides a DTS Migration Job resource.

For information about DTS Migration Job and how to use it, see [What is Migration Job](https://www.alibabacloud.com/help/en/doc-detail/208399.html).

-> **NOTE:** Available in v1.157.0+.

## Example Usage

Basic Usage

```typescript
import * as constructs from "constructs";
import * as cdktf from "cdktf";
/*Provider bindings are generated by running cdktf get.
See https://cdk.tf/provider-generation for more details.*/
import * as alicloud from "./.gen/providers/alicloud";
class MyConvertedCode extends cdktf.TerraformStack {
  constructor(scope: constructs.Construct, name: string) {
    super(scope, name);
    /*Terraform Variables are not always the best fit for getting inputs in the context of Terraform CDK.
    You can read more about this at https://cdk.tf/variables*/
    const databaseName = new cdktf.TerraformVariable(this, "database_name", {
      default: "tftestdatabase",
    });
    const name = new cdktf.TerraformVariable(this, "name", {
      default: "tftest",
    });
    const password = new cdktf.TerraformVariable(this, "password", {
      default: "Test12345",
    });
    const region = new cdktf.TerraformVariable(this, "region", {
      default: "cn-hangzhou",
    });
    const alicloudDtsMigrationInstanceDefault =
      new alicloud.dtsMigrationInstance.DtsMigrationInstance(this, "default", {
        destinationEndpointEngineName: "MySQL",
        destinationEndpointRegion: region.stringValue,
        instanceClass: "small",
        paymentType: "PayAsYouGo",
        sourceEndpointEngineName: "MySQL",
        sourceEndpointRegion: region.stringValue,
        syncArchitecture: "oneway",
      });
    const dataAlicloudDbInstanceClassesDefault =
      new alicloud.dataAlicloudDbInstanceClasses.DataAlicloudDbInstanceClasses(
        this,
        "default_5",
        {
          engine: "MySQL",
          engineVersion: "5.6",
        }
      );
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    dataAlicloudDbInstanceClassesDefault.overrideLogicalId("default");
    const dataAlicloudDbZonesDefault =
      new alicloud.dataAlicloudDbZones.DataAlicloudDbZones(
        this,
        "default_6",
        {}
      );
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    dataAlicloudDbZonesDefault.overrideLogicalId("default");
    const dataAlicloudVpcsDefault =
      new alicloud.dataAlicloudVpcs.DataAlicloudVpcs(this, "default_7", {
        nameRegex: "default-NODELETING",
      });
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    dataAlicloudVpcsDefault.overrideLogicalId("default");
    const dataAlicloudVswitchesDefault =
      new alicloud.dataAlicloudVswitches.DataAlicloudVswitches(
        this,
        "default_8",
        {
          vpcId: cdktf.Token.asString(
            cdktf.propertyAccess(dataAlicloudVpcsDefault.ids, ["0"])
          ),
          zoneId: cdktf.Token.asString(
            cdktf.propertyAccess(dataAlicloudDbZonesDefault.zones, ["0", "id"])
          ),
        }
      );
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    dataAlicloudVswitchesDefault.overrideLogicalId("default");
    /*In most cases loops should be handled in the programming language context and 
    not inside of the Terraform context. If you are looping over something external, e.g. a variable or a file input
    you should consider using a for loop. If you are looping over something only known to Terraform, e.g. a result of a data source
    you need to keep this like it is.*/
    const alicloudDbInstanceDefaultCount = cdktf.TerraformCount.of(
      cdktf.Token.asNumber("2")
    );
    const alicloudDbInstanceDefault = new alicloud.dbInstance.DbInstance(
      this,
      "default_9",
      {
        engine: "MySQL",
        engineVersion: "5.6",
        instanceName: cdktf.Fn.join(
          "",
          cdktf.Token.asList([name.value, alicloudDbInstanceDefaultCount.index])
        ),
        instanceStorage: cdktf.Token.asNumber("10"),
        instanceType: cdktf.Token.asString(
          cdktf.propertyAccess(
            dataAlicloudDbInstanceClassesDefault.instanceClasses,
            ["0", "instance_class"]
          )
        ),
        vswitchId: cdktf.Token.asString(
          cdktf.propertyAccess(dataAlicloudVswitchesDefault.ids, ["0"])
        ),
        count: alicloudDbInstanceDefaultCount,
      }
    );
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    alicloudDbInstanceDefault.overrideLogicalId("default");
    /*In most cases loops should be handled in the programming language context and 
    not inside of the Terraform context. If you are looping over something external, e.g. a variable or a file input
    you should consider using a for loop. If you are looping over something only known to Terraform, e.g. a result of a data source
    you need to keep this like it is.*/
    const alicloudRdsAccountDefaultCount = cdktf.TerraformCount.of(
      cdktf.Token.asNumber("2")
    );
    const alicloudRdsAccountDefault = new alicloud.rdsAccount.RdsAccount(
      this,
      "default_10",
      {
        accountName: cdktf.Fn.join(
          "",
          cdktf.Token.asList([name.value, alicloudRdsAccountDefaultCount.index])
        ),
        accountPassword: password.stringValue,
        dbInstanceId: cdktf.Token.asString(
          cdktf.propertyAccess(
            cdktf.propertyAccess(alicloudDbInstanceDefault, [
              alicloudRdsAccountDefaultCount.index,
            ]),
            ["id"]
          )
        ),
        count: alicloudRdsAccountDefaultCount,
      }
    );
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    alicloudRdsAccountDefault.overrideLogicalId("default");
    /*In most cases loops should be handled in the programming language context and 
    not inside of the Terraform context. If you are looping over something external, e.g. a variable or a file input
    you should consider using a for loop. If you are looping over something only known to Terraform, e.g. a result of a data source
    you need to keep this like it is.*/
    const alicloudDbDatabaseDefaultCount = cdktf.TerraformCount.of(
      cdktf.Token.asNumber("2")
    );
    const alicloudDbDatabaseDefault = new alicloud.dbDatabase.DbDatabase(
      this,
      "default_11",
      {
        instanceId: cdktf.Token.asString(
          cdktf.propertyAccess(
            cdktf.propertyAccess(alicloudDbInstanceDefault, [
              alicloudDbDatabaseDefaultCount.index,
            ]),
            ["id"]
          )
        ),
        name: databaseName.stringValue,
        count: alicloudDbDatabaseDefaultCount,
      }
    );
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    alicloudDbDatabaseDefault.overrideLogicalId("default");
    /*In most cases loops should be handled in the programming language context and 
    not inside of the Terraform context. If you are looping over something external, e.g. a variable or a file input
    you should consider using a for loop. If you are looping over something only known to Terraform, e.g. a result of a data source
    you need to keep this like it is.*/
    const alicloudDbAccountPrivilegeDefaultCount = cdktf.TerraformCount.of(
      cdktf.Token.asNumber("2")
    );
    const alicloudDbAccountPrivilegeDefault =
      new alicloud.dbAccountPrivilege.DbAccountPrivilege(this, "default_12", {
        accountName: cdktf.Token.asString(
          cdktf.propertyAccess(
            cdktf.propertyAccess(alicloudRdsAccountDefault, [
              alicloudDbAccountPrivilegeDefaultCount.index,
            ]),
            ["name"]
          )
        ),
        dbNames: [
          cdktf.Token.asString(
            cdktf.propertyAccess(
              cdktf.propertyAccess(alicloudDbDatabaseDefault, [
                alicloudDbAccountPrivilegeDefaultCount.index,
              ]),
              ["name"]
            )
          ),
        ],
        instanceId: cdktf.Token.asString(
          cdktf.propertyAccess(
            cdktf.propertyAccess(alicloudDbInstanceDefault, [
              alicloudDbAccountPrivilegeDefaultCount.index,
            ]),
            ["id"]
          )
        ),
        privilege: "ReadWrite",
        count: alicloudDbAccountPrivilegeDefaultCount,
      });
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    alicloudDbAccountPrivilegeDefault.overrideLogicalId("default");
    const alicloudDtsMigrationJobDefault =
      new alicloud.dtsMigrationJob.DtsMigrationJob(this, "default_13", {
        dataInitialization: true,
        dataSynchronization: true,
        dbList:
          '{\\"tftestdatabase\\":{\\"name\\":\\"tftestdatabase\\",\\"all\\":true}}',
        dependsOn: [alicloudDbAccountPrivilegeDefault],
        destinationEndpointEngineName: "MySQL",
        destinationEndpointInstanceId: cdktf.Token.asString(
          cdktf.propertyAccess(alicloudDbInstanceDefault, ["1", "id"])
        ),
        destinationEndpointInstanceType: "RDS",
        destinationEndpointPassword: password.stringValue,
        destinationEndpointRegion: region.stringValue,
        destinationEndpointUserName: cdktf.Token.asString(
          cdktf.propertyAccess(alicloudRdsAccountDefault, ["1", "name"])
        ),
        dtsInstanceId: cdktf.Token.asString(
          alicloudDtsMigrationInstanceDefault.id
        ),
        dtsJobName: name.stringValue,
        sourceEndpointEngineName: "MySQL",
        sourceEndpointInstanceId: cdktf.Token.asString(
          cdktf.propertyAccess(alicloudDbInstanceDefault, ["0", "id"])
        ),
        sourceEndpointInstanceType: "RDS",
        sourceEndpointPassword: password.stringValue,
        sourceEndpointRegion: region.stringValue,
        sourceEndpointUserName: cdktf.Token.asString(
          cdktf.propertyAccess(alicloudRdsAccountDefault, ["0", "name"])
        ),
        status: "Migrating",
        structureInitialization: true,
      });
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    alicloudDtsMigrationJobDefault.overrideLogicalId("default");
  }
}

```

## Argument Reference

The following arguments supported:

* `dtsInstanceId` - (Required, ForceNew) The Migration instance ID. The ID of `alicloudDtsMigrationInstance`.
* `dtsJobName` - (Optional, Computed, ForceNew) The name of migration job.
* `instanceClass` - (Optional, Computed) The instance class. Valid values: `large`, `medium`, `micro`, `small`, `xlarge`, `xxlarge`. 
* `checkpoint` - (Optional, Computed, ForceNew) Start time in Unix timestamp format.
* `dataInitialization` - (Required, ForceNew) Whether to execute DTS supports schema migration.
* `structureInitialization` - (Required, ForceNew) Whether to perform a database table structure to migrate.
* `dataSynchronization` - (Required, ForceNew) Whether to perform incremental data migration.
* `dbList` - (Required, ForceNew) Migration object, in the format of JSON strings. For detailed definition instructions, please refer to [the description of migration, migration or subscription objects](https://help.aliyun.com/document_detail/209545.html).
* `sourceEndpointInstanceType` - (Required, ForceNew) The type of source instance. Valid values: `cen`, `dg`, `distributedDmslogicdb`, `ecs`, `express`, `mongodb`, `other`, `polarDb`, `polardbx20`, `rds`.
* `sourceEndpointEngineName` - (Required, ForceNew) The type of source database. Valid values: `as400`, `db2`, `dmspolardb`, `hbase`, `mongodb`, `mssql`, `mySql`, `oracle`, `polarDb`, `polardbx20`, `polardbO`, `postgresql`, `teradata`.
* `sourceEndpointInstanceId` - (Optional, ForceNew) The ID of source instance.
* `sourceEndpointRegion` - (Optional, ForceNew) The region of source instance.
* `sourceEndpointIp` - (Optional, ForceNew) The ip of source endpoint.
* `sourceEndpointPort` - (Optional, ForceNew) The port of source endpoint.
* `sourceEndpointOracleSid` - (Optional, ForceNew) The SID of Oracle database.
* `sourceEndpointDatabaseName` - (Optional, ForceNew) The name of migrate the database.
* `sourceEndpointUserName` - (Optional, ForceNew) The username of database account.
* `sourceEndpointPassword` - (Optional) The password of database account.
* `sourceEndpointOwnerId` - (Optional, ForceNew) The Alibaba Cloud account ID to which the source instance belongs.
* `sourceEndpointRole` - (Optional, ForceNew) The name of the role configured for the cloud account to which the source instance belongs.
* `destinationEndpointInstanceType` - (Required, ForceNew) The type of destination instance. Valid values: `ads`, `cen`, `datahub`, `dg`, `ecs`, `express`, `greenplum`, `mongodb`, `other`, `polarDb`, `polardbx20`, `rds`.
* `destinationEndpointEngineName` - (Required, ForceNew) The type of destination database. Valid values: `ads`, `adb30`, `as400`, `datahub`, `db2`, `greenplum`, `kafka`, `mongodb`, `mssql`, `mySql`, `oracle`, `polarDb`, `polardbx20`, `polardbO`, `postgreSql`.
* `destinationEndpointInstanceId` - (Optional, ForceNew) The ID of destination instance.
* `destinationEndpointRegion` - (Optional, ForceNew) The region of destination instance.
* `destinationEndpointIp` - (Optional, ForceNew) The ip of source endpoint.
* `destinationEndpointPort` - (Optional, ForceNew) The port of source endpoint.
* `destinationEndpointDatabaseName` - (Optional, ForceNew) The name of migrate the database.
* `destinationEndpointUserName` - (Optional, ForceNew) The username of database account.
* `destinationEndpointPassword` - (Optional) The password of database account.
* `destinationEndpointOracleSid` - (Optional, ForceNew) The SID of Oracle database.
* `status` - (Optional, Computed) The status of the resource. Valid values: `migrating`, `suspending`. You can suspend the task by specifying `suspending` and start the task by specifying `migrating`.

## Notice

1. The expiration time cannot be changed after the work of the annual and monthly subscription suspended;
2. After the pay-as-you-go type job suspended, your job configuration fee will still be charged;
3. If the task suspended for more than 6 hours, the task will not start successfully.
4. Suspending the task will only stop writing to the target library, but will still continue to obtain the incremental log of the source, so that the task can be quickly resumed after the suspension is canceled. Therefore, some resources of the source library, such as bandwidth resources, will continue to be occupied during the period.
5. Charges will continue during the task suspension period. If you need to stop charging, please release the instance
6. When a DTS instance suspended for more than 7 days, the instance cannot be resumed, and the status will change from suspended to failed.

## Attributes Reference

The following attributes are exported:

* `id` - The resource ID in terraform of Migration Job.

## Import

DTS Migration Job can be imported using the id, e.g.

```shell
$ terraform import alicloud_dts_migration_job.example <id>
```
<!-- cache-key: cdktf-0.17.0-pre.15 input-44b56637e072f1734ce445bbc76f0bc6030fb40b7a0bc0dc7e2a325b97c5cfa9 -->