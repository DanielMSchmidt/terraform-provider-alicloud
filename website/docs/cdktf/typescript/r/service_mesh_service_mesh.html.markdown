---
subcategory: "Service Mesh"
layout: "alicloud"
page_title: "Alicloud: alicloud_service_mesh_service_mesh"
sidebar_current: "docs-alicloud-resource-service-mesh-service-mesh"
description: |-
  Provides a Alicloud Service Mesh Service Mesh resource.
---


<!-- Please do not edit this file, it is generated. -->
# alicloud\_service\_mesh\_service\_mesh

Provides a Service Mesh Service Mesh resource.

For information about Service Mesh Service Mesh and how to use it, see [What is Service Mesh](https://help.aliyun.com/document_detail/171559.html).

-> **NOTE:** Available in v1.138.0+.

## Example Usage

Basic Usage

```typescript
import * as constructs from "constructs";
import * as cdktf from "cdktf";
/*Provider bindings are generated by running cdktf get.
See https://cdk.tf/provider-generation for more details.*/
import * as alicloud from "./.gen/providers/alicloud";
class MyConvertedCode extends cdktf.TerraformStack {
  constructor(scope: constructs.Construct, name: string) {
    super(scope, name);
    const dataAlicloudVpcsDefault =
      new alicloud.dataAlicloudVpcs.DataAlicloudVpcs(this, "default", {
        nameRegex: "default-NODELETING",
      });
    const dataAlicloudZonesDefault =
      new alicloud.dataAlicloudZones.DataAlicloudZones(this, "default_1", {
        availableResourceCreation: "VSwitch",
      });
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    dataAlicloudZonesDefault.overrideLogicalId("default");
    /*In most cases loops should be handled in the programming language context and 
    not inside of the Terraform context. If you are looping over something external, e.g. a variable or a file input
    you should consider using a for loop. If you are looping over something only known to Terraform, e.g. a result of a data source
    you need to keep this like it is.*/
    const alicloudVpcDefaultCount = cdktf.TerraformCount.of(
      cdktf.Token.asNumber(
        cdktf.conditional(
          cdktf.Op.gt(cdktf.Fn.lengthOf(dataAlicloudVpcsDefault.ids), 0),
          0,
          1
        )
      )
    );
    const alicloudVpcDefault = new alicloud.vpc.Vpc(this, "default_2", {
      vpcName: "example_value",
      count: alicloudVpcDefaultCount,
    });
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    alicloudVpcDefault.overrideLogicalId("default");
    const dataAlicloudVswitchesDefault =
      new alicloud.dataAlicloudVswitches.DataAlicloudVswitches(
        this,
        "default_3",
        {
          vpcId: cdktf.Token.asString(
            cdktf.conditional(
              cdktf.Op.gt(cdktf.Fn.lengthOf(dataAlicloudVpcsDefault.ids), 0),
              cdktf.propertyAccess(dataAlicloudVpcsDefault.ids, ["0"]),
              cdktf.propertyAccess(alicloudVpcDefault, ["0", "id"])
            )
          ),
        }
      );
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    dataAlicloudVswitchesDefault.overrideLogicalId("default");
    /*In most cases loops should be handled in the programming language context and 
    not inside of the Terraform context. If you are looping over something external, e.g. a variable or a file input
    you should consider using a for loop. If you are looping over something only known to Terraform, e.g. a result of a data source
    you need to keep this like it is.*/
    const alicloudVswitchDefaultCount = cdktf.TerraformCount.of(
      cdktf.Token.asNumber(
        cdktf.conditional(
          cdktf.Op.gt(cdktf.Fn.lengthOf(dataAlicloudVswitchesDefault.ids), 0),
          0,
          1
        )
      )
    );
    const alicloudVswitchDefault = new alicloud.vswitch.Vswitch(
      this,
      "default_4",
      {
        cidrBlock: cdktf.Fn.cidrsubnet(
          cdktf.Token.asString(
            cdktf.propertyAccess(dataAlicloudVpcsDefault.vpcs, [
              "0",
              "cidr_block",
            ])
          ),
          8,
          2
        ),
        vpcId: cdktf.Token.asString(
          cdktf.conditional(
            cdktf.Op.gt(cdktf.Fn.lengthOf(dataAlicloudVpcsDefault.ids), 0),
            cdktf.propertyAccess(dataAlicloudVpcsDefault.ids, ["0"]),
            cdktf.propertyAccess(alicloudVpcDefault, ["0", "id"])
          )
        ),
        vswitchName: "example_value",
        zoneId: cdktf.Token.asString(
          cdktf.propertyAccess(dataAlicloudZonesDefault.zones, ["0", "id"])
        ),
        count: alicloudVswitchDefaultCount,
      }
    );
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    alicloudVswitchDefault.overrideLogicalId("default");
    new alicloud.serviceMeshServiceMesh.ServiceMeshServiceMesh(
      this,
      "example",
      {
        network: {
          vpcId: cdktf.Token.asString(
            cdktf.conditional(
              cdktf.Op.gt(cdktf.Fn.lengthOf(dataAlicloudVpcsDefault.ids), 0),
              cdktf.propertyAccess(dataAlicloudVpcsDefault.ids, ["0"]),
              cdktf.propertyAccess(alicloudVpcDefault, ["0", "id"])
            )
          ),
          vswitcheList: [
            cdktf.Token.asString(
              cdktf.conditional(
                cdktf.Op.gt(
                  cdktf.Fn.lengthOf(dataAlicloudVswitchesDefault.ids),
                  0
                ),
                cdktf.propertyAccess(dataAlicloudVswitchesDefault.ids, ["0"]),
                cdktf.propertyAccess(alicloudVswitchDefault, ["0", "id"])
              )
            ),
          ],
        },
        serviceMeshName: "example_value",
      }
    );
  }
}

```

## Argument Reference

The following arguments are supported:

* `loadBalancer` - (Optional, ForceNew) The configuration of the Load Balancer. See the following `Block load_balancer`.
* `meshConfig` - (Optional) The configuration of the Service grid. See the following `Block mesh_config`.
* `network` - (Required, ForceNew) The network configuration of the Service grid. See the following `Block network`.
* `serviceMeshName` - (Optional, ForceNew, Computed) The name of the resource.
* `version` - (Optional) The version of the resource. you can look up the version using `alicloudServiceMeshVersions`. **Note:** The `version` supports updating from v1.170.0, the relevant version can be obtained via `istioOperatorVersion` in `alicloudServiceMeshServiceMeshes`.
* `edition` - (Optional, ForceNew) The type  of the resource. Valid values: `default` and `pro`. `default`:the standard. `pro`:the Pro version.
* `force` - (Optional) This parameter is used for resource destroy. Default value is `false`.
* `clusterSpec` - (Optional,Available in v1.166.0+.) The service mesh instance specification. Valid values: `standard`,`enterprise`,`ultimate`.
* `clusterIds` - (Optional,Available in v1.166.0+.) The array of the cluster ids.
* `extraConfiguration` - (Optional, Available in v1.169.0+.) The configurations of additional features for the ASM instance. See the following `Block extra_configuration`.


#### Block network

The network supports the following: 

* `vpcId` - (Required) The ID of the VPC.
* `vswitcheList` - (Required) The list of Virtual Switch.

#### Block extra_configuration

The extra_configuration supports the following:

* `crAggregationEnabled` - (Optional, Available in v1.169.0+.) Indicates whether the Kubernetes API of clusters on the data plane is used to access Istio resources. A value of `true` indicates that the Kubernetes API is used.


#### Block mesh_config

The mesh_config supports the following: 

* `accessLog` - (Optional) The configuration of the access logging.
* `controlPlaneLog` - (Optional, ForceNew, Computed, Available in 1.174.0+) The configuration of the control plane logging. 
* `audit` - (Optional, Computed) The configuration of the audit. See the following `Block audit`.
* `customizedZipkin` - (Optional) Whether to enable the use of a custom zipkin.
* `enableLocalityLb` - (Optional) The enable locality lb.
* `kiali` - (Optional, Computed) The configuration of the Kiali. See the following `Block kiali`.
* `opa` - (Optional) The open-door policy of agent (OPA) plug-in information. See the following `Block opa`.
* `outboundTrafficPolicy` - (Optional) The policy of the Out to the traffic. Valid values: `allowAny` and `registryOnly`.
* `pilot` - (Optional, ForceNew) The configuration of the Link trace sampling. See the following `Block pilot`.
* `proxy` - (Optional) The configuration of the Proxy. See the following `Block proxy`.
* `sidecarInjector` - (Optional)The configuration of the Sidecar injector. See the following `Block sidecar_injector`.
* `telemetry` - (Optional) Whether to enable acquisition Prometheus metrics (it is recommended that you use [Alibaba Cloud Prometheus monitoring](https://arms.console.aliyun.com/).
* `tracing` - (Optional) Whether to enable link trace (you need to have [Alibaba Cloud link tracking service](https://tracing-analysis.console.aliyun.com/).

#### Block access_log

The access_log supports the following:

* `enabled` - (Optional, Available in 1.174.0+) Whether to enable of the access logging. Valid values: `true` and `false`.
* `project` - (Optional, Available in 1.174.0+) The SLS Project of the access logging.

#### Block control_plane_log

The control_plane_log supports the following:

* `enabled` - (Optional, Available in 1.174.0+) Whether to enable of the control plane logging. Valid values: `true` and `false`.
* `project` - (Optional, Available in 1.174.0+) The SLS Project of the control plane logging.

#### Block sidecar_injector

The sidecar_injector supports the following: 

* `autoInjectionPolicyEnabled` - (Optional) Whether to enable by Pod Annotations automatic injection Sidecar.
* `enableNamespacesByDefault` - (Optional) Whether it is the all namespaces you turn on the auto injection capabilities.
* `limitCpu` - (Optional, Computed) The limit cpu of the Sidecar injector Pods.
* `limitMemory` - (Optional, Computed) Sidecar injector Pods on the throttle.
* `requestCpu` - (Optional, Computed) The requested cpu the Sidecar injector Pods.
* `requestMemory` - (Optional, Computed) The requested memory the Sidecar injector Pods.

#### Block proxy

The proxy supports the following: 

* `limitCpu` - (Optional) The limit cpu of the resource.
* `limitMemory` - (Optional) The memory limit of the resource.
* `requestCpu` - (Optional) The request cpu of the resource.
* `requestMemory` - (Optional) The request memory of the resource.

#### Block pilot

The pilot supports the following: 

* `http10Enabled` - (Optional) Whether to support the HTTP1.0.
* `traceSampling` - (Optional) The  percentage of the Link trace sampling.

#### Block kiali

The kiali supports the following: 

* `enabled` - (Optional, Computed) Whether to enable kiali, you must first open the collection Prometheus, when the configuration update is false, the system automatically set this value to false.

#### Block opa

The opa supports the following:

* `enabled` - (Optional) Whether integration-open policy agent (OPA) plug-in.
* `limitCpu` - (Optional) The CPU resource  of the limitsOPA proxy container.
* `limitMemory` - (Optional) The memory resource limit of the OPA proxy container.
* `logLevel` - (Optional) The log level of the OPA proxy container .
* `requestCpu` - (Optional) The CPU resource request of the OPA proxy container.
* `requestMemory` - (Optional) The memory resource request of the OPA proxy container.

#### Block audit

The audit supports the following: 

* `enabled` - (Optional) Whether to enable Service grid audit.
* `project` - (Optional) The Service grid audit that to the project.

#### Block load_balancer

The load_balancer supports the following: 

* `apiServerPublicEip` - (Optional)  Whether to use the IP address of a public network exposed the API Server.
* `pilotPublicEip` - (Optional) Whether to use the IP address of a public network exposure the Istio Pilot.

## Attributes Reference

The following attributes are exported:

* `id` - The resource ID in terraform of Service Mesh.
* `status` - The status of the resource. Valid values: `running` or `initial`.

### Timeouts

The `timeouts` block allows you to specify [timeouts](https://www.terraform.io/docs/configuration-0-11/resources.html#timeouts) for certain actions:

* `create` - (Defaults to 5 mins) Used when create the Service Mesh.
* `update` - (Defaults to 5 mins) Used when update the Service Mesh.
* `delete` - (Defaults to 5 mins) Used when delete the Service Mesh.

## Import

Service Mesh Service Mesh can be imported using the id, e.g.

```shell
$ terraform import alicloud_service_mesh_service_mesh.example <id>
```

<!-- cache-key: cdktf-0.17.0-pre.15 input-b5ae9bbe5514feba8cff9dfb2bf07c7f7d45645cfb20acda2143d951122b4f46 -->