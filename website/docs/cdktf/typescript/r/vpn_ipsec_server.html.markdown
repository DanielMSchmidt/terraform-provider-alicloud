---
subcategory: "VPN Gateway"
layout: "alicloud"
page_title: "Alicloud: alicloud_vpn_ipsec_server"
sidebar_current: "docs-alicloud-resource-vpn-ipsec-server"
description: |-
  Provides a Alicloud VPN Ipsec Server resource.
---


<!-- Please do not edit this file, it is generated. -->
# alicloud\_vpn\_ipsec\_server

Provides a VPN Ipsec Server resource.

For information about VPN Ipsec Server and how to use it, see [What is Ipsec Server](https://www.alibabacloud.com/help/en/doc-detail/205454.html).

-> **NOTE:** Available in v1.161.0+.

## Example Usage

Basic Usage

```typescript
import * as constructs from "constructs";
import * as cdktf from "cdktf";
/*Provider bindings are generated by running cdktf get.
See https://cdk.tf/provider-generation for more details.*/
import * as alicloud from "./.gen/providers/alicloud";
class MyConvertedCode extends cdktf.TerraformStack {
  constructor(scope: constructs.Construct, name: string) {
    super(scope, name);
    const alicloudVpcFoo = new alicloud.vpc.Vpc(this, "foo", {
      cidrBlock: "172.16.0.0/12",
      vpcName: "terraform-example",
    });
    const dataAlicloudZonesFoo =
      new alicloud.dataAlicloudZones.DataAlicloudZones(this, "foo_1", {
        availableResourceCreation: "VSwitch",
      });
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    dataAlicloudZonesFoo.overrideLogicalId("foo");
    const alicloudVswitchFoo = new alicloud.vswitch.Vswitch(this, "foo_2", {
      cidrBlock: "172.16.0.0/21",
      vpcId: cdktf.Token.asString(alicloudVpcFoo.id),
      vswitchName: "terraform-example",
      zoneId: cdktf.Token.asString(
        cdktf.propertyAccess(dataAlicloudZonesFoo.zones, ["0", "id"])
      ),
    });
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    alicloudVswitchFoo.overrideLogicalId("foo");
    const alicloudVpnGatewayFoo = new alicloud.vpnGateway.VpnGateway(
      this,
      "foo_3",
      {
        bandwidth: cdktf.Token.asNumber("10"),
        description: "terraform-example",
        enableSsl: true,
        instanceChargeType: "PrePaid",
        name: "terraform-example",
        vpcId: cdktf.Token.asString(alicloudVpcFoo.id),
        vswitchId: cdktf.Token.asString(alicloudVswitchFoo.id),
      }
    );
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    alicloudVpnGatewayFoo.overrideLogicalId("foo");
    const alicloudVpnIpsecServerFoo =
      new alicloud.vpnIpsecServer.VpnIpsecServer(this, "foo_4", {
        clientIpPool: "10.0.0.0/24",
        ipsecServerName: "terraform-example",
        localSubnet: "192.168.0.0/24",
        pskEnabled: true,
        vpnGatewayId: cdktf.Token.asString(alicloudVpnGatewayFoo.id),
      });
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    alicloudVpnIpsecServerFoo.overrideLogicalId("foo");
  }
}

```

## Argument Reference

The following arguments are supported:

* `clientIpPool` - (Required) The client CIDR block. It refers to the CIDR block that is allocated to the virtual interface of the client.
* `dryRun` - (Optional) The dry run.
* `effectImmediately` - (Optional) Specifies whether you want the configuration to immediately take effect.
* `ipsecServerName` - (Optional) The name of the IPsec server. The name must be `2` to `128` characters in length, and can contain digits, hyphens (-), and underscores (_). It must start with a letter.
* `localSubnet` - (Required) The local CIDR block. It refers to the CIDR block of the virtual private cloud (VPC) that is used to connect with the client. Separate multiple CIDR blocks with commas (,). Example: `19216810/24,19216820/24`.
* `psk` - (Optional) The pre-shared key. The pre-shared key is used to authenticate the VPN gateway and the client. By default, the system generates a random string that is 16 bits in length. You can also specify the pre-shared key. It can contain at most 100 characters.
* `pskEnabled` - (Optional) Whether to enable the pre-shared key authentication method. The value is only `true`, which indicates that the pre-shared key authentication method is enabled.
* `vpnGatewayId` - (Required, ForceNew) The ID of the VPN gateway.
* `ikeConfig` - (Optional) The configuration of Phase 1 negotiations. See the following `Block ike_config`.
* `ipsecConfig` - (Optional) The configuration of Phase 2 negotiations. See the following `Block ipsec_config`.

#### Block ike_config

The ike_config supports the following:

* `ikeAuthAlg` - (Optional) The authentication algorithm that is used in Phase 1 negotiations. Default value: `sha1`.
* `ikeEncAlg` - (Optional) The encryption algorithm that is used in Phase 1 negotiations. Default value: `aes`.
* `ikeLifetime` - (Optional) IkeLifetime: the SA lifetime determined by Phase 1 negotiations. Valid values: `0` to `86400`. Default value: `86400`. Unit: `seconds`.
* `ikeMode` - (Optional) The IKE negotiation mode. Default value: `main`.
* `ikePfs` - (Optional) The Diffie-Hellman key exchange algorithm that is used in Phase 1 negotiations. Default value: `group2`.
* `ikeVersion` - (Optional) The IKE version. Valid values: `ikev1` and `ikev2`. Default value: `ikev2`.
* `localId` - (Optional) The identifier of the IPsec server. The value can be a fully qualified domain name (FQDN) or an IP address. The default value is the public IP address of the VPN gateway.
* `remoteId` - (Optional) The identifier of the customer gateway. The value can be an FQDN or an IP address. By default, this parameter is not specified.

#### Block ipsec_config

The ipsec_config supports the following:

* `ipsecEncAlg` - (Optional) The encryption algorithm that is used in Phase 2 negotiations. Default value: `aes`.
* `ipsecLifetime` - (Optional) The SA lifetime determined by Phase 2 negotiations. Valid values: `0` to `86400`. Default value: `86400`. Unit: `seconds`.
* `ipsecPfs` - (Optional) Forwards packets of all protocols. The Diffie-Hellman key exchange algorithm used in Phase 2 negotiations. Default value: `group2`.
* `ipsecAuthAlg` - (Optional) The authentication algorithm that is used in Phase 2 negotiations. Default value: `sha1`.

## Attributes Reference

The following attributes are exported:

* `id` - The resource ID in terraform of Ipsec Server.

### Timeouts

The `timeouts` block allows you to specify [timeouts](https://www.terraform.io/docs/configuration-0-11/resources.html#timeouts) for certain actions:

* `create` - (Defaults to 1 mins) Used when create the Ipsec Server.
* `update` - (Defaults to 1 mins) Used when update the Ipsec Server.
* `delete` - (Defaults to 1 mins) Used when delete the Ipsec Server.

## Import

VPN Ipsec Server can be imported using the id, e.g.

```shell
$ terraform import alicloud_vpn_ipsec_server.example <id>
```
<!-- cache-key: cdktf-0.17.0-pre.15 input-554862ed5b7c88ad8ba53d135d8ddb94c2afa972027cc8241ea88758d02245c3 -->