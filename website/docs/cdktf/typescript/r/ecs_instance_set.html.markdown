---
subcategory: "ECS"
layout: "alicloud"
page_title: "Alicloud: alicloud_ecs_instance_set"
sidebar_current: "docs-alicloud-ecs-instance-set"
description: |-
  Provides an ECS Instance Set resource.
---


<!-- Please do not edit this file, it is generated. -->
# alicloud\_ecs\_instance\_set

Provides a ECS Instance Set resource.

For information about ECS Instance Set and how to use it, see [What is Instance Set](https://www.alibabacloud.com/help/en/elastic-compute-service/latest/runinstances).

-> **NOTE:** Available in v1.173.0+.

-> **NOTE:** This resource is used to batch create a group of instance resources with the same configuration. However, this resource is not recommended. `alicloudInstance` is preferred.

-> **NOTE:** In the instances managed by this resource, names are automatically generated based on `instanceName` and `uniqueSuffix`.

-> **NOTE:** Only `tags` support batch modification.

## Example Usage

```typescript
import * as constructs from "constructs";
import * as cdktf from "cdktf";
/*Provider bindings are generated by running cdktf get.
See https://cdk.tf/provider-generation for more details.*/
import * as alicloud from "./.gen/providers/alicloud";
class MyConvertedCode extends cdktf.TerraformStack {
  constructor(scope: constructs.Construct, name: string) {
    super(scope, name);
    /*Terraform Variables are not always the best fit for getting inputs in the context of Terraform CDK.
    You can read more about this at https://cdk.tf/variables*/
    const name = new cdktf.TerraformVariable(this, "name", {
      default: "terraform-example",
    });
    const alicloudVpcDefault = new alicloud.vpc.Vpc(this, "default", {
      cidrBlock: "172.17.3.0/24",
      vpcName: name.stringValue,
    });
    const dataAlicloudImagesDefault =
      new alicloud.dataAlicloudImages.DataAlicloudImages(this, "default_2", {
        mostRecent: true,
        nameRegex: "^ubuntu_[0-9]+_[0-9]+_x64*",
        owners: "system",
      });
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    dataAlicloudImagesDefault.overrideLogicalId("default");
    const dataAlicloudZonesDefault =
      new alicloud.dataAlicloudZones.DataAlicloudZones(this, "default_3", {
        availableDiskCategory: "cloud_efficiency",
        availableResourceCreation: "VSwitch",
      });
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    dataAlicloudZonesDefault.overrideLogicalId("default");
    const alicloudSecurityGroupDefault =
      new alicloud.securityGroup.SecurityGroup(this, "default_4", {
        name: name.stringValue,
        vpcId: cdktf.Token.asString(alicloudVpcDefault.id),
      });
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    alicloudSecurityGroupDefault.overrideLogicalId("default");
    const alicloudVswitchDefault = new alicloud.vswitch.Vswitch(
      this,
      "default_5",
      {
        cidrBlock: "172.17.3.0/24",
        vpcId: cdktf.Token.asString(alicloudVpcDefault.id),
        vswitchName: name.stringValue,
        zoneId: cdktf.Token.asString(
          cdktf.propertyAccess(dataAlicloudZonesDefault.zones, ["0", "id"])
        ),
      }
    );
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    alicloudVswitchDefault.overrideLogicalId("default");
    const dataAlicloudInstanceTypesDefault =
      new alicloud.dataAlicloudInstanceTypes.DataAlicloudInstanceTypes(
        this,
        "default_6",
        {
          availabilityZone: cdktf.Token.asString(
            cdktf.propertyAccess(dataAlicloudZonesDefault.zones, ["0", "id"])
          ),
          cpuCoreCount: 1,
          memorySize: 2,
        }
      );
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    dataAlicloudInstanceTypesDefault.overrideLogicalId("default");
    new alicloud.ecsInstanceSet.EcsInstanceSet(this, "beijing_k", {
      amount: 10,
      imageId: cdktf.Token.asString(
        cdktf.propertyAccess(dataAlicloudImagesDefault.images, ["0", "id"])
      ),
      instanceChargeType: "PostPaid",
      instanceName: name.stringValue,
      instanceType: cdktf.Token.asString(
        cdktf.propertyAccess(dataAlicloudInstanceTypesDefault.instanceTypes, [
          "0",
          "id",
        ])
      ),
      securityGroupIds: cdktf.Token.asList(
        cdktf.propertyAccess(alicloudSecurityGroupDefault, ["*", "id"])
      ),
      systemDiskCategory: "cloud_efficiency",
      systemDiskPerformanceLevel: "PL0",
      systemDiskSize: 200,
      vswitchId: cdktf.Token.asString(alicloudVswitchDefault.id),
      zoneId: cdktf.Token.asString(
        cdktf.propertyAccess(dataAlicloudZonesDefault.zones, ["0", "id"])
      ),
    });
  }
}

```


## Argument Reference

The following arguments are supported:

* `amount` - (Optional, ForceNew) The number of instances that you want to create. Valid values: `1` to `100`.
* `resourceGroupId` - (Optional, ForceNew) The ID of resource group which the instance belongs.
* `hpcClusterId` - (Optional, ForceNew) The ID of the Elastic High Performance Computing (E-HPC) cluster to which to assign the instance.
* `description` - (Optional, ForceNew) The description of the instance, This description can have a string of 2 to 256 characters, It cannot begin with `http://` or `https://`.
* `securityGroupIds` - (Required, ForceNew)  A list of security group ids to associate with.
* `imageId` - (Required, ForceNew) The Image to use for the instance.
* `instanceType` - (Required, ForceNew) The type of instance to start. 
* `securityEnhancementStrategy` - (Optional, ForceNew) The security enhancement strategy.
    - `active`: Enable security enhancement strategy, it only works on system images.
    - `deactive`: Disable security enhancement strategy, it works on all images.
* `instanceName` - (Optional, ForceNew) The name of the ECS. This instance_name can have a string of 2 to 128 characters, must contain only alphanumeric characters or hyphens, such as "-",".","_", and must not begin with a hyphen, and must not begin with `http://` or `https://`.
* `password` - (Optional, Sensitive, ForceNew) The password to an instance is a string of 8 to 30 characters. It must contain uppercase/lowercase letters and numerals, but cannot contain special symbols.
* `passwordInherit` - (Optional, ForceNew) Whether to use the password preset in the image.
* `zoneId` - (Optional, ForceNew, Computed)The ID of the zone in which to create the instance.
* `hostName` - (Optional, ForceNew) The hostname of instance.
* `autoReleaseTime` - (Optional,ForceNew ) The automatic release time of the `postPaid` instance.
* `dataDisks` - (Optional, ForceNew) The list of data disks created with instance. See the following `Block data_disks`.
* `internetChargeType` - (Optional, ForceNew, Computed) The Internet charge type of the instance. Valid values are `payByBandwidth`, `payByTraffic`.
* `internetMaxBandwidthOut` - (Optional, ForceNew, Computed) The Maximum outgoing bandwidth to the public network, measured in Mbps (Mega bit per second). Valid values: `1` to `100`.
* `systemDiskCategory` - (Optional, ForceNew, Computed) The category of the system disk. Valid values are `cloudEfficiency`, `cloudSsd`, `cloudEssd`, `cloud`.
* `systemDiskDescription` - (Optional, ForceNew) The description of the system disk. The description must be 2 to 256 characters in length and cannot start with `http://` or `https://`.
* `systemDiskName` - (Optional, ForceNew) The name of the system disk.
* `systemDiskSize` - (Optional, ForceNew, Computed) The size of the system disk, measured in GiB. Value range:  values: `20` to `500`.
* `systemDiskPerformanceLevel` (Optional, ForceNew, Computed) The performance level of the ESSD used as the system disk. Valid values: `pl0`, `pl1`, `pl2`, `pl3`.
* `systemDiskAutoSnapshotPolicyId` - (Optional) The ID of the automatic snapshot policy applied to the system disk.
* `tags` - (Optional) A mapping of tags to assign to the resource.
* `vswitchId` - (Optional, ForceNew) The virtual switch ID to launch in VPC. 
* `ramRoleName` - (Optional, ForceNew) The Instance RAM role name. 
* `keyPairName` - (Optional, ForceNew) The name of key pair that can login ECS instance successfully without password.
* `spotStrategy` - (Optional, ForceNew, Computed) The spot strategy of a Pay-As-You-Go instance, and it takes effect only when parameter `instanceChargeType` is 'PostPaid'.
    - `noSpot`: A regular Pay-As-You-Go instance.
    - `spotWithPriceLimit`: A price threshold for a spot instance.
    - `spotAsPriceGo`: A price that is based on the highest Pay-As-You-Go instance
* `spotPriceLimit` - (Optional, ForceNew, Computed) The hourly price threshold of a instance, and it takes effect only when parameter 'spot_strategy' is 'SpotWithPriceLimit'. Three decimals is allowed at most.
* `dedicatedHostId` - (Optional, ForceNew) The ID of the dedicated host on which to create the instance. If the `dedicatedHostId` is specified, the `spotStrategy` and `spotPriceLimit`  are ignored. This is because preemptible instances cannot be created on dedicated hosts.
* `launchTemplateName` - (Optional, ForceNew) The name of the launch template. To use a launch template to create an instance, you must use the `launchTemplateId` or `launchTemplateName` parameter to specify the launch template.
* `launchTemplateId` - (Optional, ForceNew) The ID of the launch template.
* `launchTemplateVersion` - (Optional, ForceNew) The version of the launch template.
* `periodUnit` - (Optional, ForceNew) The duration unit that you will buy the resource. It is valid when `instanceChargeType` is 'PrePaid'. Valid value: `week`, `month`.
* `autoRenew` - (Optional, ForceNew) Whether to enable auto-renewal for the instance. This parameter is valid only when the `instanceChargeType` is set to `prePaid`.
* `autoRenewPeriod` - (Optional, ForceNew) Auto renewal period of an instance, in the unit of month. It is valid when `instanceChargeType` is `prePaid`.
    - When `periodUnit` is `month`, Valid values: `1`, `2`, `3`, `6`, `12`.
    - When `periodUnit` is `week`, Valid values: `1`, `2`, `3`.
* `instanceChargeType` - (Optional, ForceNew) The billing method of the instance. Valid values: `prePaid`, `postPaid`.
* `period` - (Optional, ForceNew) The duration that you will buy the resource, in month. It is valid when `instanceChargeType` is `prePaid`.
    - When `periodUnit` is `month`, Valid values: `1`, `2`, `3`, `4`, `5`, `6`, `7`, `8`, `9`, `12`, `24`, `36`, `48`, `60`.
    - When `periodUnit` is `week`, Valid values: `1`, `2`, `3`.
* `deletionProtection` - (Optional, ForceNew, Computed) Whether to enable release protection for the instance.
* `deploymentSetId` - (Optional, ForceNew) The ID of the deployment set to which to deploy the instance.
* `networkInterfaces` - (Optional, ForceNew) A list of NetworkInterface. See the following `Block network_interfaces`.
* `uniqueSuffix` - (Optional, ForceNew) Whether to automatically append incremental suffixes to the hostname specified by the HostName parameter and to the instance name specified by the InstanceName parameter when you batch create instances. The incremental suffixes can range from `001` to `999`.
* `excludeInstanceFilter` - (Optional, Available in v1.176.0+) The instances that need to be excluded from the Instance Set. See the following `Block exclude_instance_filter`.
* `bootCheckOsWithAssistant`  - (Optional, Available in v1.177.0+) Indicate how to check instance ready to use.
  - `false`: Default value. Means that the instances are ready when their DescribeInstances status is Running, at which time guestOS(Ecs os) may not be ready yet.
  - `true`: Checking instance ready with Ecs assistant, which means guestOs boots successfully. Premise is that the specified image `imageId` has built-in Ecs assistant. Most of the public images have assistant installed already.


#### Block data_disks

The `dataDisks` supports the following:

* `diskName` - (Optional, ForceNew) The name of the data disk.
* `diskSize` - (Required, ForceNew) The size of the data disk. Unit: GiB.
  - When `diskCategory` is `cloudEfficiency`, Valid values: `20` to `32768`.
  - When `diskCategory` is `cloudSsd`, Valid values: `20` to `32768`.
  - When `diskCategory` is `cloudEssd`, Valid values: `20` to `32768`.
  - When `diskCategory` is `cloud`, Valid values: `5` to `200`.
* `diskCategory` - (Optional, ForceNew, Computed) The category of the disk. Valid values: `cloudEfficiency`, `cloudSsd`, `cloudEssd`, `cloud`.
* `performanceLevel` - (Optional, ForceNew, Computed) The performance level of the ESSD used as data disk. Valid values: `pl0`, `pl1`, `pl2`, `pl3`.
* `kmsKeyId` - (Optional, ForceNew) The KMS key ID corresponding to the data disk.
* `snapshotId` - (Optional, ForceNew) The snapshot ID used to initialize the data disk. If the size specified by snapshot is greater that the size of the disk, use the size specified by snapshot as the size of the data disk.
* `autoSnapshotPolicyId` - (Optional, ForceNew) The ID of the automatic snapshot policy applied to the system disk.
* `diskDescription` - (Optional, ForceNew) The description of the data disk.

#### Block network_interfaces

The `networkInterfaces` supports the following:

* `securityGroupId` -(Required, ForceNew) The ID of the security group to which to assign secondary ENI.
* `vswitchId` - (Optional, ForceNew) The ID of the vSwitch to which to connect ENI.
* `description` - (Optional, ForceNew) The description of ENI.
* `networkInterfaceName` - (Optional, ForceNew) The name of ENI.
* `primaryIpAddress` - (Optional, ForceNew) The primary private IP address of ENI.

#### Block exclude_instance_filter

The `excludeInstanceFilter` supports the following:

* `key` - (Required) The type of the excluded. Valid values: `instanceId`, `instanceName`.
* `value` - (Required) The value of the excluded. The identification of the excluded instances. It is a list of instance Ids or names.

## Attributes Reference

The following attributes are exported:

* `id` - The ID of the resource. The value of the id is the Base64 encoding of `instanceIds`.
* `instanceIds` -  A list of ECS Instance ID.


### Timeouts

The `timeouts` block allows you to specify [timeouts](https://www.terraform.io/docs/configuration-0-11/resources.html#timeouts) for certain actions:

* `create` - (Defaults to 30 mins) Used when create the ECS Instance Set.
* `update` - (Defaults to 30 mins) Used when update the ECS Instance Set.
* `delete` - (Defaults to 30 mins) Used when delete the ECS Instance Set.


<!-- cache-key: cdktf-0.17.0-pre.15 input-5935e429bfcd9fd1a9bd7d720c18045be8da5b271884089f2f1dec49149bcfe8 -->