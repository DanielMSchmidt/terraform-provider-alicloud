---
subcategory: "ECS"
layout: "alicloud"
page_title: "Alicloud: alicloud_ecs_image_pipeline"
sidebar_current: "docs-alicloud-resource-ecs-image-pipeline"
description: |-
  Provides a Alicloud ECS Image Pipeline resource.
---


<!-- Please do not edit this file, it is generated. -->
# alicloud\_ecs\_image\_pipeline

Provides a ECS Image Pipeline resource.

For information about ECS Image Pipeline and how to use it, see [What is Image Pipeline](https://www.alibabacloud.com/help/en/doc-detail/200427.html).

-> **NOTE:** Available in v1.163.0+.

## Example Usage

Basic Usage

```typescript
import * as constructs from "constructs";
import * as cdktf from "cdktf";
/*Provider bindings are generated by running cdktf get.
See https://cdk.tf/provider-generation for more details.*/
import * as alicloud from "./.gen/providers/alicloud";
class MyConvertedCode extends cdktf.TerraformStack {
  constructor(scope: constructs.Construct, name: string) {
    super(scope, name);
    const alicloudVpcDefault = new alicloud.vpc.Vpc(this, "default", {
      cidrBlock: "172.17.3.0/24",
      vpcName: "terraform-example",
    });
    const dataAlicloudAccountDefault =
      new alicloud.dataAlicloudAccount.DataAlicloudAccount(
        this,
        "default_1",
        {}
      );
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    dataAlicloudAccountDefault.overrideLogicalId("default");
    const dataAlicloudImagesDefault =
      new alicloud.dataAlicloudImages.DataAlicloudImages(this, "default_2", {
        mostRecent: true,
        nameRegex: "^ubuntu_[0-9]+_[0-9]+_x64*",
        owners: "system",
      });
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    dataAlicloudImagesDefault.overrideLogicalId("default");
    const dataAlicloudInstanceTypesDefault =
      new alicloud.dataAlicloudInstanceTypes.DataAlicloudInstanceTypes(
        this,
        "default_3",
        {
          imageId: cdktf.Token.asString(
            cdktf.propertyAccess(dataAlicloudImagesDefault.ids, ["0"])
          ),
        }
      );
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    dataAlicloudInstanceTypesDefault.overrideLogicalId("default");
    const dataAlicloudResourceManagerResourceGroupsDefault =
      new alicloud.dataAlicloudResourceManagerResourceGroups.DataAlicloudResourceManagerResourceGroups(
        this,
        "default_4",
        {
          nameRegex: "default",
        }
      );
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    dataAlicloudResourceManagerResourceGroupsDefault.overrideLogicalId(
      "default"
    );
    const dataAlicloudZonesDefault =
      new alicloud.dataAlicloudZones.DataAlicloudZones(this, "default_5", {
        availableResourceCreation: "VSwitch",
      });
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    dataAlicloudZonesDefault.overrideLogicalId("default");
    const alicloudVswitchDefault = new alicloud.vswitch.Vswitch(
      this,
      "default_6",
      {
        cidrBlock: "172.17.3.0/24",
        vpcId: cdktf.Token.asString(alicloudVpcDefault.id),
        vswitchName: "terraform-example",
        zoneId: cdktf.Token.asString(
          cdktf.propertyAccess(dataAlicloudZonesDefault.zones, ["0", "id"])
        ),
      }
    );
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    alicloudVswitchDefault.overrideLogicalId("default");
    const alicloudEcsImagePipelineDefault =
      new alicloud.ecsImagePipeline.EcsImagePipeline(this, "default_7", {
        addAccount: [cdktf.Token.asString(dataAlicloudAccountDefault.id)],
        baseImage: cdktf.Token.asString(
          cdktf.propertyAccess(dataAlicloudImagesDefault.ids, ["0"])
        ),
        baseImageType: "IMAGE",
        buildContent: "RUN yum update -y",
        deleteInstanceOnFailure: false,
        description: "terraform-example",
        imageName: "terraform-example",
        instanceType: cdktf.Token.asString(
          cdktf.propertyAccess(dataAlicloudInstanceTypesDefault.ids, ["0"])
        ),
        internetMaxBandwidthOut: 20,
        name: "terraform-example",
        resourceGroupId: cdktf.Token.asString(
          cdktf.propertyAccess(
            dataAlicloudResourceManagerResourceGroupsDefault.groups,
            ["0", "id"]
          )
        ),
        systemDiskSize: 40,
        tags: {
          Created: "TF",
          For: "Acceptance-test",
        },
        toRegionId: ["cn-qingdao", "cn-zhangjiakou"],
        vswitchId: cdktf.Token.asString(alicloudVswitchDefault.id),
      });
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    alicloudEcsImagePipelineDefault.overrideLogicalId("default");
  }
}

```

## Argument Reference

The following arguments are supported:

* `addAccount` - (Optional, ForceNew) The ID of Alibaba Cloud account to which to share the created image.
* `baseImage` - (Required, ForceNew) The source image. When you set `baseImageType` to `image`, set `baseImage` to the ID of a custom image. When you set `baseImageType` to `imageFamily`, set `baseImage` to the name of an image family.
* `baseImageType` - (Required, ForceNew) The type of the source image. Valid values: `image`, `imageFamily`.
  - IMAGE: custom image.
  - IMAGE_FAMILY: image family.
* `buildContent` - (Optional, ForceNew) The content of the image template. The content cannot be greater than 16 KB in size, and can contain up to 127 commands.
* `deleteInstanceOnFailure` - (Optional, ForceNew) Specifies whether to release the intermediate instance if the image cannot be created.
* `description` - (Optional, ForceNew) The description of the image template. The description must be `2` to `256` characters in length and cannot start with `http://` or `https://`. **Note:** If the intermediate instance cannot be started, the instance is released by default.
* `imageName` - (Optional, ForceNew) The name prefix of the image to be created. The prefix must be `2` to `64` characters in length. It must start with a letter and cannot start with `http://` or `https://`. It can contain letters, digits, colons (:), underscores (_), periods (.),and hyphens (-).
* `instanceType` - (Optional, ForceNew) The instance type of the instance. You can call the DescribeInstanceTypes operation to query instance types. If you do not specify this parameter, an instance type that provides the fewest vCPUs and memory resources is automatically selected. This configuration is subject to resource availability of instance types. For example, the `ecsG6Large` instance type is selected by default. If available `ecsG6Large` resources are insufficient, the `ecsG6Xlarge` instance type is selected.
* `internetMaxBandwidthOut` - (Optional, ForceNew) The size of the outbound public bandwidth for the intermediate instance. Unit: `mbit/s`. Valid values: `0` to `100`. Default value: `0`.
* `name` - (Optional, ForceNew) The name of the image template. The name must be `2` to `128` characters in length. It must start with a letter and cannot start with `http://` or `https://`. It can contain letters, digits, colons (:), underscores (_), periods (.),and hyphens (-).
* `systemDiskSize` - (Optional, ForceNew) The size of the system disk of the intermediate instance. Unit: GiB. Valid values: `20` to `500`. Default value: `40`.
* `tags` - (Optional, ForceNew) A mapping of tags to assign to the resource.
* `resourceGroupId` - (Optional, ForceNew, Computed) The ID of the resource group.
* `toRegionId` - (Optional, ForceNew) The ID of region to which to distribute the created image.
* `vswitchId` - (Optional, ForceNew) The ID of the vSwitch. If you do not specify this parameter, a virtual private cloud (VPC) and a vSwitch are created by default.

## Attributes Reference

The following attributes are exported:

* `id` - The resource ID in terraform of Image Pipeline.

## Import

ECS Image Pipeline can be imported using the id, e.g.

```shell
$ terraform import alicloud_ecs_image_pipeline.example <id>
```
<!-- cache-key: cdktf-0.17.0-pre.15 input-441387da4e73da54e3264024439997ff7ddfadfa94c18e5ea4b5a0875ee2157a -->