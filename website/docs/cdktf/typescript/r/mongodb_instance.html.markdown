---
subcategory: "MongoDB"
layout: "alicloud"
page_title: "Alicloud: alicloud_mongodb_instance"
sidebar_current: "docs-alicloud-resource-mongodb-instance"
description: |-
  Provides a MongoDB instance resource.
---


<!-- Please do not edit this file, it is generated. -->
# alicloud\_mongodb\_instance

Provides a MongoDB instance resource supports replica set instances only. the MongoDB provides stable, reliable, and automatic scalable database services. 
It offers a full range of database solutions, such as disaster recovery, backup, recovery, monitoring, and alarms.
You can see detail product introduction [here](https://www.alibabacloud.com/help/doc-detail/26558.htm)

-> **NOTE:**  Available in 1.37.0+

-> **NOTE:**  The following regions don't support create Classic network MongoDB instance.
[`cnZhangjiakou`,`cnHuhehaote`,`apSoutheast2`,`apSoutheast3`,`apSoutheast5`,`apSouth1`,`meEast1`,`apNortheast1`,`euWest1`] 

-> **NOTE:**  Create MongoDB instance or change instance type and storage would cost 5~10 minutes. Please make full preparation

## Example Usage

### Create a Mongodb instance

```typescript
import * as constructs from "constructs";
import * as cdktf from "cdktf";
/*Provider bindings are generated by running cdktf get.
See https://cdk.tf/provider-generation for more details.*/
import * as alicloud from "./.gen/providers/alicloud";
class MyConvertedCode extends cdktf.TerraformStack {
  constructor(scope: constructs.Construct, name: string) {
    super(scope, name);
    const alicloudVpcDefault = new alicloud.vpc.Vpc(this, "default", {
      cidrBlock: "172.16.0.0/16",
      name: "vpc-123456",
    });
    const dataAlicloudZonesDefault =
      new alicloud.dataAlicloudZones.DataAlicloudZones(this, "default_1", {
        availableResourceCreation: "MongoDB",
      });
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    dataAlicloudZonesDefault.overrideLogicalId("default");
    const alicloudVswitchDefault = new alicloud.vswitch.Vswitch(
      this,
      "default_2",
      {
        cidrBlock: "172.16.0.0/24",
        name: "vpc-123456",
        vpcId: cdktf.Token.asString(alicloudVpcDefault.id),
        zoneId: cdktf.Token.asString(
          cdktf.propertyAccess(dataAlicloudZonesDefault.zones, ["0", "id"])
        ),
      }
    );
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    alicloudVswitchDefault.overrideLogicalId("default");
    new alicloud.mongodbInstance.MongodbInstance(this, "example", {
      dbInstanceClass: "dds.mongo.mid",
      dbInstanceStorage: 10,
      engineVersion: "3.4",
      securityIpList: ["10.168.1.12", "100.69.7.112"],
      vswitchId: cdktf.Token.asString(alicloudVswitchDefault.id),
    });
  }
}

```

## Module Support

You can use to the existing [mongodb module](https://registry.terraform.io/modules/terraform-alicloud-modules/mongodb/alicloud) 
to create a MongoDB instance resource one-click.


## Argument Reference

The following arguments are supported:

* `engineVersion` - (Required, ForceNew) Database version. Value options can refer to the latest docs [CreateDBInstance](https://www.alibabacloud.com/help/doc-detail/61763.htm) `engineVersion`.
* `dbInstanceClass` - (Required) Instance specification. see [Instance specifications](https://www.alibabacloud.com/help/doc-detail/57141.htm).
* `dbInstanceStorage` - (Required) User-defined DB instance storage space.Unit: GB. Value range:
  - Custom storage space.
  - 10-GB increments. 
* `replicationFactor` - (Optional) Number of replica set nodes. Valid values: [1, 3, 5, 7]
* `storageEngine` (Optional, ForceNew) Storage engine: WiredTiger or RocksDB. System Default value: WiredTiger.
* `name` - (Optional) The name of DB instance. It a string of 2 to 256 characters.
* `instanceChargeType` - (Optional) Valid values are `prePaid`, `postPaid`, System default to `postPaid`. **NOTE:** It can be modified from `postPaid` to `prePaid` after version 1.63.0.
* `period` - (Optional) The duration that you will buy DB instance (in month). It is valid when instance_charge_type is `prePaid`. Valid values: [1~9], 12, 24, 36. System default to 1.
* `zoneId` - (Optional, ForceNew) The Zone to launch the DB instance. it supports multiple zone.
If it is a multi-zone and `vswitchId` is specified, the vswitch must in one of them.
The multiple zone ID can be retrieved by setting `multi` to "true" in the data source `alicloudZones`.
* `vswitchId` - (Optional, ForceNew) The virtual switch ID to launch DB instances in one VPC.
* `accountPassword` - (Optional, Sensitive) Password of the root account. It is a string of 6 to 32 characters and is composed of letters, numbers, and underlines.
* `kmsEncryptedPassword` - (Optional, Available in 1.57.1+) An KMS encrypts password used to a instance. If the `accountPassword` is filled in, this field will be ignored.
* `kmsEncryptionContext` - (Optional, MapString, Available in 1.57.1+) An KMS encryption context used to decrypt `kmsEncryptedPassword` before creating or updating instance with `kmsEncryptedPassword`. See [Encryption Context](https://www.alibabacloud.com/help/doc-detail/42975.htm). It is valid when `kmsEncryptedPassword` is set.
* `securityIpList` - (Optional) List of IP addresses allowed to access all databases of an instance. The list contains up to 1,000 IP addresses, separated by commas. Supported formats include 0.0.0.0/0, 10.23.12.24 (IP), and 10.23.12.24/24 (Classless Inter-Domain Routing (CIDR) mode. /24 represents the length of the prefix in an IP address. The range of the prefix length is [1,32]).
* `securityGroupId` - (Optional, Available in 1.73.0+) The Security Group ID of ECS.
* `backupPeriod` - (Optional, Available in 1.42.0+) MongoDB Instance backup period. It is required when `backupTime` was existed. Valid values: [Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, Sunday]. Default to [Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, Sunday]
* `backupTime` - (Optional, Available in 1.42.0+) MongoDB instance backup time. It is required when `backupPeriod` was existed. In the format of HH:mmZ- HH:mmZ. Time setting interval is one hour. If not set, the system will return a default, like "23:00Z-24:00Z".
* `tdeStatus` - (Optional, Available in 1.73.0+) The TDE(Transparent Data Encryption) status.
* `maintainStartTime` - (Optional, Available in v1.56.0+) The start time of the operation and maintenance time period of the instance, in the format of HH:mmZ (UTC time).
* `maintainEndTime` - (Optional, Available in v1.56.0+) The end time of the operation and maintenance time period of the instance, in the format of HH:mmZ (UTC time).
* `orderType` - (Optional, Available in v1.134.0+) The type of configuration changes performed. Default value: DOWNGRADE. Valid values:
  * UPGRADE: The specifications are upgraded.
  * DOWNGRADE: The specifications are downgraded.
    Note: This parameter is only applicable to instances when `instanceChargeType` is PrePaid.
    
* `sslAction` - (Optional, Available in v1.78.0+) Actions performed on SSL functions, Valid values: `open`: turn on SSL encryption; `close`: turn off SSL encryption; `update`: update SSL certificate.
* `tags` - (Optional, Available in v1.66.0+) A mapping of tags to assign to the resource.
* `autoRenew` - (Optional, Available in v1.141.0+) Auto renew for prepaid, true of false. Default is false.
-> **NOTE:** The start time to the end time must be 1 hour. For example, the MaintainStartTime is 01:00Z, then the MaintainEndTime must be 02:00Z.
* `networkType` - (Optional, ForceNew, Computed, Available in v1.161.0+) The network type of the instance. Valid values:`classic` or `vpc`. Default value: `classic`.
* `vpcId` - (Optional, ForceNew, Computed, Available in v1.161.0+) The ID of the VPC. -> **NOTE:** This parameter is valid only when NetworkType is set to VPC.
* `resourceGroupId` - (Optional, Computed, Available in v1.161.0+) The ID of the Resource Group.
* `readonlyReplicas` - (Optional, Computed, Available in v1.199.0+) The number of read-only nodes in the replica set instance. Default value: 0. Valid values: 0 to 5.
* `storageType` - (Optional, Computed, ForceNew, Available in v1.199.0+) The storage type of the instance. Valid values: `cloudEssd1`, `cloudEssd2`, `cloudEssd3`, `localSsd`.
* `hiddenZoneId` - (Optional, Computed, ForceNew, Available in v1.199.0+) Configure the zone where the hidden node is located to deploy multiple zones. **NOTE:** This parameter value cannot be the same as `zoneId` and `secondaryZoneId` parameter values.
* `secondaryZoneId` - (Optional, Computed, ForceNew, Available in v1.199.0+) Configure the available area where the slave node (Secondary node) is located to realize multi-available area deployment. **NOTE:** This parameter value cannot be the same as `zoneId` and `hiddenZoneId` parameter values.
* `parameters` - (Optional, Computed, Available in v1.203.0+) Set of parameters needs to be set after mongodb instance was launched. See the following `Block parameters`.

#### Block parameters

The parameters supports the following:

* `name` - The name of the parameter.
* `value` - The value of the parameter.

## Attributes Reference

The following attributes are exported:

* `id` - The ID of the MongoDB.
* `retentionPeriod` - Instance log backup retention days. Available in 1.42.0+.
* `replicaSetName` - The name of the mongo replica set
* `sslStatus` - Status of the SSL feature. `open`: SSL is turned on; `closed`: SSL is turned off.
* `replicaSets` - Replica set instance information. The details see Block replica_sets. **NOTE:** Available in v1.140+.

#### replica_sets
The replica_sets supports the following:
* `vswitchId` - The virtual switch ID to launch DB instances in one VPC.
* `connectionPort` - The connection port of the node.
* `replicaSetRole` - The role of the node. Valid values: `primary`,`secondary`.
* `connectionDomain` - The connection address of the node.
* `vpcCloudInstanceId` - VPC instance ID.
* `networkType` - The network type of the node. Valid values: `classic`,`vpc`.
* `vpcId` - The private network ID of the node.

### Timeouts

-> **NOTE:** Available in 1.53.0+.

The `timeouts` block allows you to specify [timeouts](https://www.terraform.io/docs/configuration-0-11/resources.html#timeouts) for certain actions:

* `create` - (Defaults to 30 mins) Used when creating the MongoDB instance (until it reaches the initial `running` status). 
* `update` - (Defaults to 30 mins) Used when updating the MongoDB instance (until it reaches the initial `running` status). 
* `delete` - (Defaults to 30 mins) Used when terminating the MongoDB instance. 

## Import

MongoDB can be imported using the id, e.g.

```shell
$ terraform import alicloud_mongodb_instance.example dds-bp1291daeda44194
```

<!-- cache-key: cdktf-0.17.0-pre.15 input-8b9105db2dde0af74ec17793f96746f03ed15acc6f2ba5072fb472ed88a47e66 -->